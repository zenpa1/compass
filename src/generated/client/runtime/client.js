
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
// biome-ignore-all lint: generated file
"use strict";var Zl=Object.create;var Qt=Object.defineProperty;var Yl=Object.getOwnPropertyDescriptor;var Xl=Object.getOwnPropertyNames;var eu=Object.getPrototypeOf,tu=Object.prototype.hasOwnProperty;var yi=(e,t)=>()=>(e&&(t=e(e=0)),t);var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ie=(e,t)=>{for(var r in t)Qt(e,r,{get:t[r],enumerable:!0})},hi=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Xl(t))!tu.call(e,i)&&i!==r&&Qt(e,i,{get:()=>t[i],enumerable:!(n=Yl(t,i))||n.enumerable});return e};var U=(e,t,r)=>(r=e!=null?Zl(eu(e)):{},hi(t||!e||!e.__esModule?Qt(r,"default",{value:e,enumerable:!0}):r,e)),ru=e=>hi(Qt({},"__esModule",{value:!0}),e);var Ni=V((ff,Su)=>{Su.exports={name:"@prisma/engines-version",version:"7.4.0-20.ab56fe763f921d033a6c195e7ddeb3e255bdbb57",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"ab56fe763f921d033a6c195e7ddeb3e255bdbb57"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.76",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}});var Di=V(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.enginesVersion=void 0;Ht.enginesVersion=Ni().prisma.enginesVersion});var Mi=V((yf,Fi)=>{"use strict";Fi.exports=e=>{let t=e.match(/^[ \t]*(?=\S)/gm);return t?t.reduce((r,n)=>Math.min(r,n.length),1/0):0}});var qi=V((bf,Vi)=>{"use strict";Vi.exports=(e,t=1,r)=>{if(r={indent:" ",includeEmptyLines:!1,...r},typeof e!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if(typeof t!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if(typeof r.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(t===0)return e;let n=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(n,r.indent.repeat(t))}});var Ui=V((vf,zt)=>{"use strict";zt.exports=(e={})=>{let t;if(e.repoUrl)t=e.repoUrl;else if(e.user&&e.repo)t=`https://github.com/${e.user}/${e.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let r=new URL(`${t}/issues/new`),n=["body","title","labels","template","milestone","assignee","projects"];for(let i of n){let o=e[i];if(o!==void 0){if(i==="labels"||i==="projects"){if(!Array.isArray(o))throw new TypeError(`The \`${i}\` option should be an array`);o=o.join(",")}r.searchParams.set(i,o)}}return r.toString()};zt.exports.default=zt.exports});var cn=V((hg,Ki)=>{"use strict";Ki.exports=function(){function e(t,r,n,i,o){return t<r||n<r?t>n?n+1:t+1:i===o?r:r+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n=t;t=r,r=n}for(var i=t.length,o=r.length;i>0&&t.charCodeAt(i-1)===r.charCodeAt(o-1);)i--,o--;for(var s=0;s<i&&t.charCodeAt(s)===r.charCodeAt(s);)s++;if(i-=s,o-=s,i===0||o<3)return o;var a=0,l,u,c,p,d,f,h,x,E,L,T,A,j=[];for(l=0;l<i;l++)j.push(l+1),j.push(t.charCodeAt(s+l));for(var ke=j.length-1;a<o-3;)for(E=r.charCodeAt(s+(u=a)),L=r.charCodeAt(s+(c=a+1)),T=r.charCodeAt(s+(p=a+2)),A=r.charCodeAt(s+(d=a+3)),f=a+=4,l=0;l<ke;l+=2)h=j[l],x=j[l+1],u=e(h,u,c,E,x),c=e(u,c,p,L,x),p=e(c,p,d,T,x),f=e(p,d,f,A,x),j[l]=f,d=p,p=c,c=u,u=h;for(;a<o;)for(E=r.charCodeAt(s+(u=a)),f=++a,l=0;l<ke;l+=2)h=j[l],j[l]=f=e(h,u,f,E,j[l+1]),u=h;return f}}()});var to=yi(()=>{"use strict"});var ro=yi(()=>{"use strict"});var On=V(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.anumber=In;Te.abytes=ws;Te.ahash=Ap;Te.aexists=vp;Te.aoutput=Cp;function In(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Sp(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ws(e,...t){if(!Sp(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ap(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");In(e.outputLen),In(e.blockLen)}function vp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Cp(e,t){ws(e);let r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}});var qs=V(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.add5L=g.add5H=g.add4H=g.add4L=g.add3H=g.add3L=g.rotlBL=g.rotlBH=g.rotlSL=g.rotlSH=g.rotr32L=g.rotr32H=g.rotrBL=g.rotrBH=g.rotrSL=g.rotrSH=g.shrSL=g.shrSH=g.toBig=void 0;g.fromBig=Dn;g.split=bs;g.add=Ds;var Pr=BigInt(2**32-1),Nn=BigInt(32);function Dn(e,t=!1){return t?{h:Number(e&Pr),l:Number(e>>Nn&Pr)}:{h:Number(e>>Nn&Pr)|0,l:Number(e&Pr)|0}}function bs(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:o,l:s}=Dn(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}var xs=(e,t)=>BigInt(e>>>0)<<Nn|BigInt(t>>>0);g.toBig=xs;var Es=(e,t,r)=>e>>>r;g.shrSH=Es;var Ps=(e,t,r)=>e<<32-r|t>>>r;g.shrSL=Ps;var Ts=(e,t,r)=>e>>>r|t<<32-r;g.rotrSH=Ts;var Ss=(e,t,r)=>e<<32-r|t>>>r;g.rotrSL=Ss;var As=(e,t,r)=>e<<64-r|t>>>r-32;g.rotrBH=As;var vs=(e,t,r)=>e>>>r-32|t<<64-r;g.rotrBL=vs;var Cs=(e,t)=>t;g.rotr32H=Cs;var Rs=(e,t)=>e;g.rotr32L=Rs;var ks=(e,t,r)=>e<<r|t>>>32-r;g.rotlSH=ks;var Is=(e,t,r)=>t<<r|e>>>32-r;g.rotlSL=Is;var Os=(e,t,r)=>t<<r-32|e>>>64-r;g.rotlBH=Os;var Ns=(e,t,r)=>e<<r-32|t>>>64-r;g.rotlBL=Ns;function Ds(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var Fs=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);g.add3L=Fs;var Ms=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;g.add3H=Ms;var _s=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);g.add4L=_s;var Ls=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;g.add4H=Ls;var $s=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);g.add5L=$s;var Vs=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;g.add5H=Vs;var Rp={fromBig:Dn,split:bs,toBig:xs,shrSH:Es,shrSL:Ps,rotrSH:Ts,rotrSL:Ss,rotrBH:As,rotrBL:vs,rotr32H:Cs,rotr32L:Rs,rotlSH:ks,rotlSL:Is,rotlBH:Os,rotlBL:Ns,add:Ds,add3L:Fs,add3H:Ms,add4L:_s,add4H:Ls,add5H:Vs,add5L:$s};g.default=Rp});var js=V(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.crypto=void 0;var fe=require("node:crypto");Tr.crypto=fe&&typeof fe=="object"&&"webcrypto"in fe?fe.webcrypto:fe&&typeof fe=="object"&&"randomBytes"in fe?fe:void 0});var Qs=V(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.Hash=b.nextTick=b.byteSwapIfBE=b.isLE=void 0;b.isBytes=kp;b.u8=Ip;b.u32=Op;b.createView=Np;b.rotr=Dp;b.rotl=Fp;b.byteSwap=_n;b.byteSwap32=Mp;b.bytesToHex=Lp;b.hexToBytes=$p;b.asyncLoop=qp;b.utf8ToBytes=Bs;b.toBytes=Sr;b.concatBytes=jp;b.checkOpts=Up;b.wrapConstructor=Bp;b.wrapConstructorWithOpts=Qp;b.wrapXOFConstructorWithOpts=Jp;b.randomBytes=Hp;var Ge=js(),Mn=On();function kp(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ip(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Op(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Np(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Dp(e,t){return e<<32-t|e>>>t}function Fp(e,t){return e<<t|e>>>32-t>>>0}b.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _n(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}b.byteSwapIfBE=b.isLE?e=>e:e=>_n(e);function Mp(e){for(let t=0;t<e.length;t++)e[t]=_n(e[t])}var _p=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Lp(e){(0,Mn.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=_p[e[r]];return t}var oe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Us(e){if(e>=oe._0&&e<=oe._9)return e-oe._0;if(e>=oe.A&&e<=oe.F)return e-(oe.A-10);if(e>=oe.a&&e<=oe.f)return e-(oe.a-10)}function $p(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){let s=Us(e.charCodeAt(o)),a=Us(e.charCodeAt(o+1));if(s===void 0||a===void 0){let l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=s*16+a}return n}var Vp=async()=>{};b.nextTick=Vp;async function qp(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let o=Date.now()-n;o>=0&&o<t||(await(0,b.nextTick)(),n+=o)}}function Bs(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Sr(e){return typeof e=="string"&&(e=Bs(e)),(0,Mn.abytes)(e),e}function jp(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];(0,Mn.abytes)(i),t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var Fn=class{clone(){return this._cloneInto()}};b.Hash=Fn;function Up(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(e,t)}function Bp(e){let t=n=>e().update(Sr(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Qp(e){let t=(n,i)=>e(i).update(Sr(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function Jp(e){let t=(n,i)=>e(i).update(Sr(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}function Hp(e=32){if(Ge.crypto&&typeof Ge.crypto.getRandomValues=="function")return Ge.crypto.getRandomValues(new Uint8Array(e));if(Ge.crypto&&typeof Ge.crypto.randomBytes=="function")return Ge.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}});var Ys=V(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.shake256=C.shake128=C.keccak_512=C.keccak_384=C.keccak_256=C.keccak_224=C.sha3_512=C.sha3_384=C.sha3_256=C.sha3_224=C.Keccak=void 0;C.keccakP=Ks;var ze=On(),kt=qs(),se=Qs(),Gs=[],zs=[],Ws=[],Gp=BigInt(0),Rt=BigInt(1),zp=BigInt(2),Wp=BigInt(7),Kp=BigInt(256),Zp=BigInt(113);for(let e=0,t=Rt,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],Gs.push(2*(5*n+r)),zs.push((e+1)*(e+2)/2%64);let i=Gp;for(let o=0;o<7;o++)t=(t<<Rt^(t>>Wp)*Zp)%Kp,t&zp&&(i^=Rt<<(Rt<<BigInt(o))-Rt);Ws.push(i)}var[Yp,Xp]=(0,kt.split)(Ws,!0),Js=(e,t,r)=>r>32?(0,kt.rotlBH)(e,t,r):(0,kt.rotlSH)(e,t,r),Hs=(e,t,r)=>r>32?(0,kt.rotlBL)(e,t,r):(0,kt.rotlSL)(e,t,r);function Ks(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)r[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){let a=(s+8)%10,l=(s+2)%10,u=r[l],c=r[l+1],p=Js(u,c,1)^r[a],d=Hs(u,c,1)^r[a+1];for(let f=0;f<50;f+=10)e[s+f]^=p,e[s+f+1]^=d}let i=e[2],o=e[3];for(let s=0;s<24;s++){let a=zs[s],l=Js(i,o,a),u=Hs(i,o,a),c=Gs[s];i=e[c],o=e[c+1],e[c]=l,e[c+1]=u}for(let s=0;s<50;s+=10){for(let a=0;a<10;a++)r[a]=e[s+a];for(let a=0;a<10;a++)e[s+a]^=~r[(a+2)%10]&r[(a+4)%10]}e[0]^=Yp[n],e[1]^=Xp[n]}r.fill(0)}var It=class e extends se.Hash{constructor(t,r,n,i=!1,o=24){if(super(),this.blockLen=t,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,ze.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,se.u32)(this.state)}keccak(){se.isLE||(0,se.byteSwap32)(this.state32),Ks(this.state32,this.rounds),se.isLE||(0,se.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,ze.aexists)(this);let{blockLen:r,state:n}=this;t=(0,se.toBytes)(t);let i=t.length;for(let o=0;o<i;){let s=Math.min(r-this.pos,i-o);for(let a=0;a<s;a++)n[this.pos++]^=t[o++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:r,pos:n,blockLen:i}=this;t[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){(0,ze.aexists)(this,!1),(0,ze.abytes)(t),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,o=t.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);t.set(r.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,ze.anumber)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,ze.aoutput)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:r,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return t||(t=new e(r,n,i,s,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}};C.Keccak=It;var ge=(e,t,r)=>(0,se.wrapConstructor)(()=>new It(t,e,r));C.sha3_224=ge(6,144,224/8);C.sha3_256=ge(6,136,256/8);C.sha3_384=ge(6,104,384/8);C.sha3_512=ge(6,72,512/8);C.keccak_224=ge(1,144,224/8);C.keccak_256=ge(1,136,256/8);C.keccak_384=ge(1,104,384/8);C.keccak_512=ge(1,72,512/8);var Zs=(e,t,r)=>(0,se.wrapXOFConstructorWithOpts)((n={})=>new It(t,e,n.dkLen===void 0?r:n.dkLen,!0));C.shake128=Zs(31,168,128/8);C.shake256=Zs(31,136,256/8)});var sa=V((ix,ye)=>{"use strict";var{sha3_512:ed}=Ys(),ea=24,Ot=32,Ln=(e=4,t=Math.random)=>{let r="";for(;r.length<e;)r=r+Math.floor(t()*36).toString(36);return r};function ta(e){let t=8n,r=0n;for(let n of e.values()){let i=BigInt(n);r=(r<<t)+i}return r}var ra=(e="")=>ta(ed(e)).toString(36).slice(1),Xs=Array.from({length:26},(e,t)=>String.fromCharCode(t+97)),td=e=>Xs[Math.floor(e()*Xs.length)],na=({globalObj:e=typeof global<"u"?global:typeof window<"u"?window:{},random:t=Math.random}={})=>{let r=Object.keys(e).toString(),n=r.length?r+Ln(Ot,t):Ln(Ot,t);return ra(n).substring(0,Ot)},ia=e=>()=>e++,rd=476782367,oa=({random:e=Math.random,counter:t=ia(Math.floor(e()*rd)),length:r=ea,fingerprint:n=na({random:e})}={})=>function(){let o=td(e),s=Date.now().toString(36),a=t().toString(36),l=Ln(r,e),u=`${s+l+a+n}`;return`${o+ra(u).substring(1,r)}`},nd=oa(),id=(e,{minLength:t=2,maxLength:r=Ot}={})=>{let n=e.length,i=/^[0-9a-z]+$/;try{if(typeof e=="string"&&n>=t&&n<=r&&i.test(e))return!0}finally{}return!1};ye.exports.getConstants=()=>({defaultLength:ea,bigLength:Ot});ye.exports.init=oa;ye.exports.createId=nd;ye.exports.bufToBigInt=ta;ye.exports.createCounter=ia;ye.exports.createFingerprint=na;ye.exports.isCuid=id});var aa=V((ox,Nt)=>{"use strict";var{createId:od,init:sd,getConstants:ad,isCuid:ld}=sa();Nt.exports.createId=od;Nt.exports.init=sd;Nt.exports.getConstants=ad;Nt.exports.isCuid=ld});var _m={};Ie(_m,{AnyNull:()=>M.AnyNull,DMMF:()=>ft,DbNull:()=>M.DbNull,Debug:()=>F,Decimal:()=>Gl.Decimal,Extensions:()=>Kr,JsonNull:()=>M.JsonNull,NullTypes:()=>M.NullTypes,ObjectEnumValue:()=>M.ObjectEnumValue,PrismaClientInitializationError:()=>w.PrismaClientInitializationError,PrismaClientKnownRequestError:()=>w.PrismaClientKnownRequestError,PrismaClientRustPanicError:()=>w.PrismaClientRustPanicError,PrismaClientUnknownRequestError:()=>w.PrismaClientUnknownRequestError,PrismaClientValidationError:()=>w.PrismaClientValidationError,Public:()=>Zr,Sql:()=>re.Sql,createParam:()=>Eo,defineDmmfProperty:()=>vo,deserializeJsonResponse:()=>me,deserializeRawResult:()=>Gr,dmmfToRuntimeDataModel:()=>Pi,empty:()=>re.empty,getPrismaClient:()=>Ql,getRuntime:()=>Hl,isAnyNull:()=>M.isAnyNull,isDbNull:()=>M.isDbNull,isJsonNull:()=>M.isJsonNull,join:()=>re.join,makeStrictEnum:()=>Jl,makeTypedQueryFactory:()=>Co,raw:()=>re.raw,serializeJsonQuery:()=>pr,skip:()=>cr,sqltag:()=>re.sql,warnOnce:()=>un});module.exports=ru(_m);var Kr={};Ie(Kr,{defineExtension:()=>wi,getExtensionContext:()=>bi});function wi(e){return typeof e=="function"?e:t=>t.$extends(e)}function bi(e){return e}var Zr={};Ie(Zr,{validator:()=>xi});function xi(...e){return t=>t}var z=class{_map=new Map;get(t){return this._map.get(t)?.value}set(t,r){this._map.set(t,{value:r})}getOrCreate(t,r){let n=this._map.get(t);if(n)return n.value;let i=r();return this.set(t,i),i}};function ue(e){return e.substring(0,1).toLowerCase()+e.substring(1)}function Ei(e,t){let r={};for(let n of e){let i=n[t];r[i]=n}return r}function rt(e){let t;return{get(){return t||(t={value:e()}),t.value}}}function Pi(e){return{models:Yr(e.models),enums:Yr(e.enums),types:Yr(e.types)}}function Yr(e){let t={};for(let{name:r,...n}of e)t[r]=n;return t}var pe=require("@prisma/client-runtime-utils");var Jt={};Ie(Jt,{$:()=>Ci,bgBlack:()=>du,bgBlue:()=>yu,bgCyan:()=>wu,bgGreen:()=>fu,bgMagenta:()=>hu,bgRed:()=>mu,bgWhite:()=>bu,bgYellow:()=>gu,black:()=>lu,blue:()=>be,bold:()=>Q,cyan:()=>ne,dim:()=>nt,gray:()=>at,green:()=>ot,grey:()=>pu,hidden:()=>su,inverse:()=>ou,italic:()=>iu,magenta:()=>uu,red:()=>we,reset:()=>nu,strikethrough:()=>au,underline:()=>it,white:()=>cu,yellow:()=>st});var Xr,Ti,Si,Ai,vi=!0;typeof process<"u"&&({FORCE_COLOR:Xr,NODE_DISABLE_COLORS:Ti,NO_COLOR:Si,TERM:Ai}=process.env||{},vi=process.stdout&&process.stdout.isTTY);var Ci={enabled:!Ti&&Si==null&&Ai!=="dumb"&&(Xr!=null&&Xr!=="0"||vi)};function S(e,t){let r=new RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1B[${e}m`,i=`\x1B[${t}m`;return function(o){return!Ci.enabled||o==null?o:n+(~(""+o).indexOf(i)?o.replace(r,i+n):o)+i}}var nu=S(0,0),Q=S(1,22),nt=S(2,22),iu=S(3,23),it=S(4,24),ou=S(7,27),su=S(8,28),au=S(9,29),lu=S(30,39),we=S(31,39),ot=S(32,39),st=S(33,39),be=S(34,39),uu=S(35,39),ne=S(36,39),cu=S(37,39),at=S(90,39),pu=S(90,39),du=S(40,49),mu=S(41,49),fu=S(42,49),gu=S(43,49),yu=S(44,49),hu=S(45,49),wu=S(46,49),bu=S(47,49);var xu=100,Ri=["green","yellow","blue","magenta","cyan","red"],lt=[],ki=Date.now(),Eu=0,en=typeof process<"u"?process.env:{};globalThis.DEBUG??=en.DEBUG??"";globalThis.DEBUG_COLORS??=en.DEBUG_COLORS?en.DEBUG_COLORS==="true":!0;var ut={enable(e){typeof e=="string"&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(i=>i.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(i=>i===""||i[0]==="-"?!1:e.match(RegExp(i.split("*").join(".*")+"$"))),n=t.some(i=>i===""||i[0]!=="-"?!1:e.match(RegExp(i.slice(1).split("*").join(".*")+"$")));return r&&!n},log:(...e)=>{let[t,r,...n]=e;(console.warn??console.log)(`${t} ${r}`,...n)},formatters:{}};function Pu(e){let t={color:Ri[Eu++%Ri.length],enabled:ut.enabled(e),namespace:e,log:ut.log,extend:()=>{}},r=(...n)=>{let{enabled:i,namespace:o,color:s,log:a}=t;if(n.length!==0&&lt.push([o,...n]),lt.length>xu&&lt.shift(),ut.enabled(o)||i){let l=n.map(c=>typeof c=="string"?c:Tu(c)),u=`+${Date.now()-ki}ms`;ki=Date.now(),globalThis.DEBUG_COLORS?a(Jt[s](Q(o)),...l,Jt[s](u)):a(o,...l,u)}};return new Proxy(r,{get:(n,i)=>t[i],set:(n,i,o)=>t[i]=o})}var F=new Proxy(Pu,{get:(e,t)=>ut[t],set:(e,t,r)=>ut[t]=r});function Tu(e,t=2){let r=new Set;return JSON.stringify(e,(n,i)=>{if(typeof i=="object"&&i!==null){if(r.has(i))return"[Circular *]";r.add(i)}else if(typeof i=="bigint")return i.toString();return i},t)}function Ii(e=7500){let t=lt.map(([r,...n])=>`${r} ${n.map(i=>typeof i=="string"?i:JSON.stringify(i)).join(" ")}`).join(`
`);return t.length<e?t:t.slice(-e)}function Oi(){lt.length=0}var _i=U(Mi(),1);function tn(e){let t=(0,_i.default)(e);if(t===0)return e;let r=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(r,"")}var Li="prisma+postgres",Gt=`${Li}:`;function $i(e){return e?.toString().startsWith(`${Gt}//`)??!1}function rn(e){if(!$i(e))return!1;let{host:t}=new URL(e);return t.includes("localhost")||t.includes("127.0.0.1")||t.includes("[::1]")}var pt={};Ie(pt,{error:()=>Cu,info:()=>vu,log:()=>Au,query:()=>Ru,should:()=>ji,tags:()=>ct,warn:()=>nn});var ct={error:we("prisma:error"),warn:st("prisma:warn"),info:ne("prisma:info"),query:be("prisma:query")},ji={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function Au(...e){console.log(...e)}function nn(e,...t){ji.warn()&&console.warn(`${ct.warn} ${e}`,...t)}function vu(e,...t){console.info(`${ct.info} ${e}`,...t)}function Cu(e,...t){console.error(`${ct.error} ${e}`,...t)}function Ru(e,...t){console.log(`${ct.query} ${e}`,...t)}function ie(e,t){throw new Error(t)}function on({onlyFirst:e=!1}={}){let r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(r,e?void 0:"g")}var ku=on();function Oe(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(ku,"")}var dt=U(require("node:path"));function sn(e){return dt.default.sep===dt.default.posix.sep?e:e.split(dt.default.sep).join(dt.default.posix.sep)}function an(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Wt(e,t){let r={};for(let n of Object.keys(e))r[n]=t(e[n],n);return r}function ln(e,t){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)t(r,e[n])<0&&(r=e[n]);return r}function mt(e,t){Object.defineProperty(e,"name",{value:t,configurable:!0})}var Bi=new Set,un=(e,t,...r)=>{Bi.has(e)||(Bi.add(e),nn(t,...r))};function Ne(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function Kt(e){return e.toString()!=="Invalid Date"}var Qi=require("@prisma/client-runtime-utils");function De(e){return Qi.Decimal.isDecimal(e)?!0:e!==null&&typeof e=="object"&&typeof e.s=="number"&&typeof e.e=="number"&&typeof e.toFixed=="function"&&Array.isArray(e.d)}var go=require("@prisma/client-runtime-utils");var ft={};Ie(ft,{ModelAction:()=>Fe,datamodelEnumToSchemaEnum:()=>Iu});function Iu(e){return{name:e.name,values:e.values.map(t=>t.name)}}var Fe=(A=>(A.findUnique="findUnique",A.findUniqueOrThrow="findUniqueOrThrow",A.findFirst="findFirst",A.findFirstOrThrow="findFirstOrThrow",A.findMany="findMany",A.create="create",A.createMany="createMany",A.createManyAndReturn="createManyAndReturn",A.update="update",A.updateMany="updateMany",A.updateManyAndReturn="updateManyAndReturn",A.upsert="upsert",A.delete="delete",A.deleteMany="deleteMany",A.groupBy="groupBy",A.count="count",A.aggregate="aggregate",A.findRaw="findRaw",A.aggregateRaw="aggregateRaw",A))(Fe||{});var Wi=U(qi());var zi=U(require("node:fs"));var Ji={keyword:ne,entity:ne,value:e=>Q(be(e)),punctuation:be,directive:ne,function:ne,variable:e=>Q(be(e)),string:e=>Q(ot(e)),boolean:st,number:ne,comment:at};var Ou=e=>e,Zt={},Nu=0,y={manual:Zt.Prism&&Zt.Prism.manual,disableWorkerMessageHandler:Zt.Prism&&Zt.Prism.disableWorkerMessageHandler,util:{encode:function(e){if(e instanceof J){let t=e;return new J(t.type,y.util.encode(t.content),t.alias)}else return Array.isArray(e)?e.map(y.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++Nu}),e.__id},clone:function e(t,r){let n,i,o=y.util.type(t);switch(r=r||{},o){case"Object":if(i=y.util.objId(t),r[i])return r[i];n={},r[i]=n;for(let s in t)t.hasOwnProperty(s)&&(n[s]=e(t[s],r));return n;case"Array":return i=y.util.objId(t),r[i]?r[i]:(n=[],r[i]=n,t.forEach(function(s,a){n[a]=e(s,r)}),n);default:return t}}},languages:{extend:function(e,t){let r=y.util.clone(y.languages[e]);for(let n in t)r[n]=t[n];return r},insertBefore:function(e,t,r,n){n=n||y.languages;let i=n[e],o={};for(let a in i)if(i.hasOwnProperty(a)){if(a==t)for(let l in r)r.hasOwnProperty(l)&&(o[l]=r[l]);r.hasOwnProperty(a)||(o[a]=i[a])}let s=n[e];return n[e]=o,y.languages.DFS(y.languages,function(a,l){l===s&&a!=e&&(this[a]=o)}),o},DFS:function e(t,r,n,i){i=i||{};let o=y.util.objId;for(let s in t)if(t.hasOwnProperty(s)){r.call(t,s,t[s],n||s);let a=t[s],l=y.util.type(a);l==="Object"&&!i[o(a)]?(i[o(a)]=!0,e(a,r,null,i)):l==="Array"&&!i[o(a)]&&(i[o(a)]=!0,e(a,r,s,i))}}},plugins:{},highlight:function(e,t,r){let n={code:e,grammar:t,language:r};return y.hooks.run("before-tokenize",n),n.tokens=y.tokenize(n.code,n.grammar),y.hooks.run("after-tokenize",n),J.stringify(y.util.encode(n.tokens),n.language)},matchGrammar:function(e,t,r,n,i,o,s){for(let x in r){if(!r.hasOwnProperty(x)||!r[x])continue;if(x==s)return;let E=r[x];E=y.util.type(E)==="Array"?E:[E];for(let L=0;L<E.length;++L){let T=E[L],A=T.inside,j=!!T.lookbehind,ke=!!T.greedy,Wr=0,zl=T.alias;if(ke&&!T.pattern.global){let $=T.pattern.toString().match(/[imuy]*$/)[0];T.pattern=RegExp(T.pattern.source,$+"g")}T=T.pattern||T;for(let $=n,le=i;$<t.length;le+=t[$].length,++$){let tt=t[$];if(t.length>e.length)return;if(tt instanceof J)continue;if(ke&&$!=t.length-1){T.lastIndex=le;var p=T.exec(e);if(!p)break;var c=p.index+(j?p[1].length:0),d=p.index+p[0].length,a=$,l=le;for(let Kl=t.length;a<Kl&&(l<d||!t[a].type&&!t[a-1].greedy);++a)l+=t[a].length,c>=l&&(++$,le=l);if(t[$]instanceof J)continue;u=a-$,tt=e.slice(le,l),p.index-=le}else{T.lastIndex=0;var p=T.exec(tt),u=1}if(!p){if(o)break;continue}j&&(Wr=p[1]?p[1].length:0);var c=p.index+Wr,p=p[0].slice(Wr),d=c+p.length,f=tt.slice(0,c),h=tt.slice(d);let Bt=[$,u];f&&(++$,le+=f.length,Bt.push(f));let Wl=new J(x,A?y.tokenize(p,A):p,zl,p,ke);if(Bt.push(Wl),h&&Bt.push(h),Array.prototype.splice.apply(t,Bt),u!=1&&y.matchGrammar(e,t,r,$,le,!0,x),o)break}}}},tokenize:function(e,t){let r=[e],n=t.rest;if(n){for(let i in n)t[i]=n[i];delete t.rest}return y.matchGrammar(e,r,t,0,0,!1),r},hooks:{all:{},add:function(e,t){let r=y.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){let r=y.hooks.all[e];if(!(!r||!r.length))for(var n=0,i;i=r[n++];)i(t)}},Token:J};y.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};y.languages.javascript=y.languages.extend("clike",{"class-name":[y.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});y.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;y.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:y.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:y.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:y.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:y.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});y.languages.markup&&y.languages.markup.tag.addInlined("script","javascript");y.languages.js=y.languages.javascript;y.languages.typescript=y.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});y.languages.ts=y.languages.typescript;function J(e,t,r,n,i){this.type=e,this.content=t,this.alias=r,this.length=(n||"").length|0,this.greedy=!!i}J.stringify=function(e,t){return typeof e=="string"?e:Array.isArray(e)?e.map(function(r){return J.stringify(r,t)}).join(""):Du(e.type)(e.content)};function Du(e){return Ji[e]||Ou}function Hi(e){return Fu(e,y.languages.javascript)}function Fu(e,t){return y.tokenize(e,t).map(n=>J.stringify(n)).join("")}function Gi(e){return tn(e)}var Yt=class e{firstLineNumber;lines;static read(t){let r;try{r=zi.default.readFileSync(t,"utf-8")}catch{return null}return e.fromContent(r)}static fromContent(t){let r=t.split(/\r?\n/);return new e(1,r)}constructor(t,r){this.firstLineNumber=t,this.lines=r}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(t,r){if(t<this.firstLineNumber||t>this.lines.length+this.firstLineNumber)return this;let n=t-this.firstLineNumber,i=[...this.lines];return i[n]=r(i[n]),new e(this.firstLineNumber,i)}mapLines(t){return new e(this.firstLineNumber,this.lines.map((r,n)=>t(r,this.firstLineNumber+n)))}lineAt(t){return this.lines[t-this.firstLineNumber]}prependSymbolAt(t,r){return this.mapLines((n,i)=>i===t?`${r} ${n}`:`  ${n}`)}slice(t,r){let n=this.lines.slice(t-1,r).join(`
`);return new e(t,Gi(n).split(`
`))}highlight(){let t=Hi(this.toString());return new e(this.firstLineNumber,t.split(`
`))}toString(){return this.lines.join(`
`)}};var Mu={red:we,gray:at,dim:nt,bold:Q,underline:it,highlightSource:e=>e.highlight()},_u={red:e=>e,gray:e=>e,dim:e=>e,bold:e=>e,underline:e=>e,highlightSource:e=>e};function Lu({message:e,originalMethod:t,isPanic:r,callArguments:n}){return{functionName:`prisma.${t}()`,message:e,isPanic:r??!1,callArguments:n}}function $u({callsite:e,message:t,originalMethod:r,isPanic:n,callArguments:i},o){let s=Lu({message:t,originalMethod:r,isPanic:n,callArguments:i});if(!e||typeof window<"u"||process.env.NODE_ENV==="production")return s;let a=e.getLocation();if(!a||!a.lineNumber||!a.columnNumber)return s;let l=Math.max(1,a.lineNumber-3),u=Yt.read(a.fileName)?.slice(l,a.lineNumber),c=u?.lineAt(a.lineNumber);if(u&&c){let p=qu(c),d=Vu(c);if(!d)return s;s.functionName=`${d.code})`,s.location=a,n||(u=u.mapLineAt(a.lineNumber,h=>h.slice(0,d.openingBraceIndex))),u=o.highlightSource(u);let f=String(u.lastLineNumber).length;if(s.contextLines=u.mapLines((h,x)=>o.gray(String(x).padStart(f))+" "+h).mapLines(h=>o.dim(h)).prependSymbolAt(a.lineNumber,o.bold(o.red("\u2192"))),i){let h=p+f+1;h+=2,s.callArguments=(0,Wi.default)(i,h).slice(h)}}return s}function Vu(e){let t=Object.keys(Fe).join("|"),n=new RegExp(String.raw`\.(${t})\(`).exec(e);if(n){let i=n.index+n[0].length,o=e.lastIndexOf(" ",n.index)+1;return{code:e.slice(o,i),openingBraceIndex:i}}return null}function qu(e){let t=0;for(let r=0;r<e.length;r++){if(e.charAt(r)!==" ")return t;t++}return t}function ju({functionName:e,location:t,message:r,isPanic:n,contextLines:i,callArguments:o},s){let a=[""],l=t?" in":":";if(n?(a.push(s.red(`Oops, an unknown error occurred! This is ${s.bold("on us")}, you did nothing wrong.`)),a.push(s.red(`It occurred in the ${s.bold(`\`${e}\``)} invocation${l}`))):a.push(s.red(`Invalid ${s.bold(`\`${e}\``)} invocation${l}`)),t&&a.push(s.underline(Uu(t))),i){a.push("");let u=[i.toString()];o&&(u.push(o),u.push(s.dim(")"))),a.push(u.join("")),o&&a.push("")}else a.push(""),o&&a.push(o),a.push("");return a.push(r),a.join(`
`)}function Uu(e){let t=[e.fileName];return e.lineNumber&&t.push(String(e.lineNumber)),e.columnNumber&&t.push(String(e.columnNumber)),t.join(":")}function Xt(e){let t=e.showColors?Mu:_u,r;return r=$u(e,t),ju(r,t)}var io=U(cn());function Xi(e,t,r){let n=eo(e),i=Bu(n),o=Ju(i);o?er(o,t,r):t.addErrorMessage(()=>"Unknown error")}function eo(e){return e.errors.flatMap(t=>t.kind==="Union"?eo(t):[t])}function Bu(e){let t=new Map,r=[];for(let n of e){if(n.kind!=="InvalidArgumentType"){r.push(n);continue}let i=`${n.selectionPath.join(".")}:${n.argumentPath.join(".")}`,o=t.get(i);o?t.set(i,{...n,argument:{...n.argument,typeNames:Qu(o.argument.typeNames,n.argument.typeNames)}}):t.set(i,n)}return r.push(...t.values()),r}function Qu(e,t){return[...new Set(e.concat(t))]}function Ju(e){return ln(e,(t,r)=>{let n=Zi(t),i=Zi(r);return n!==i?n-i:Yi(t)-Yi(r)})}function Zi(e){let t=0;return Array.isArray(e.selectionPath)&&(t+=e.selectionPath.length),Array.isArray(e.argumentPath)&&(t+=e.argumentPath.length),t}function Yi(e){switch(e.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var q=class{constructor(t,r){this.name=t;this.value=r}isRequired=!1;makeRequired(){return this.isRequired=!0,this}write(t){let{colors:{green:r}}=t.context;t.addMarginSymbol(r(this.isRequired?"+":"?")),t.write(r(this.name)),this.isRequired||t.write(r("?")),t.write(r(": ")),typeof this.value=="string"?t.write(r(this.value)):t.write(this.value)}};ro();var Me=class{constructor(t=0,r){this.context=r;this.currentIndent=t}lines=[];currentLine="";currentIndent=0;marginSymbol;afterNextNewLineCallback;write(t){return typeof t=="string"?this.currentLine+=t:t.write(this),this}writeJoined(t,r,n=(i,o)=>o.write(i)){let i=r.length-1;for(let o=0;o<r.length;o++)n(r[o],this),o!==i&&this.write(t);return this}writeLine(t){return this.write(t).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let t=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,t?.(),this}withIndent(t){return this.indent(),t(this),this.unindent(),this}afterNextNewline(t){return this.afterNextNewLineCallback=t,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(t){return this.marginSymbol=t,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let t=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+t.slice(1):t}};to();var tr=class{constructor(t){this.value=t}write(t){t.write(this.value)}markAsError(){this.value.markAsError()}};var rr=e=>e,nr={bold:rr,red:rr,green:rr,dim:rr,enabled:!1},no={bold:Q,red:we,green:ot,dim:nt,enabled:!0},_e={write(e){e.writeLine(",")}};var W=class{constructor(t){this.contents=t}isUnderlined=!1;color=t=>t;underline(){return this.isUnderlined=!0,this}setColor(t){return this.color=t,this}write(t){let r=t.getCurrentLineLength();t.write(this.color(this.contents)),this.isUnderlined&&t.afterNextNewline(()=>{t.write(" ".repeat(r)).writeLine(this.color("~".repeat(this.contents.length)))})}};var ce=class{hasError=!1;markAsError(){return this.hasError=!0,this}};var Le=class extends ce{items=[];addItem(t){return this.items.push(new tr(t)),this}getField(t){return this.items[t]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map(r=>r.value.getPrintWidth()))+2}write(t){if(this.items.length===0){this.writeEmpty(t);return}this.writeWithItems(t)}writeEmpty(t){let r=new W("[]");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithItems(t){let{colors:r}=t.context;t.writeLine("[").withIndent(()=>t.writeJoined(_e,this.items).newLine()).write("]"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(r.red("~".repeat(this.getPrintWidth())))})}asObject(){}};var $e=class e extends ce{fields={};suggestions=[];addField(t){this.fields[t.name]=t}addSuggestion(t){this.suggestions.push(t)}getField(t){return this.fields[t]}getDeepField(t){let[r,...n]=t,i=this.getField(r);if(!i)return;let o=i;for(let s of n){let a;if(o.value instanceof e?a=o.value.getField(s):o.value instanceof Le&&(a=o.value.getField(Number(s))),!a)return;o=a}return o}getDeepFieldValue(t){return t.length===0?this:this.getDeepField(t)?.value}hasField(t){return!!this.getField(t)}removeAllFields(){this.fields={}}removeField(t){delete this.fields[t]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(t){return this.getField(t)?.value}getDeepSubSelectionValue(t){let r=this;for(let n of t){if(!(r instanceof e))return;let i=r.getSubSelectionValue(n);if(!i)return;r=i}return r}getDeepSelectionParent(t){let r=this.getSelectionParent();if(!r)return;let n=r;for(let i of t){let o=n.value.getFieldValue(i);if(!o||!(o instanceof e))return;let s=o.getSelectionParent();if(!s)return;n=s}return n}getSelectionParent(){let t=this.getField("select")?.value.asObject();if(t)return{kind:"select",value:t};let r=this.getField("include")?.value.asObject();if(r)return{kind:"include",value:r}}getSubSelectionValue(t){return this.getSelectionParent()?.value.fields[t].value}getPrintWidth(){let t=Object.values(this.fields);return t.length==0?2:Math.max(...t.map(n=>n.getPrintWidth()))+2}write(t){let r=Object.values(this.fields);if(r.length===0&&this.suggestions.length===0){this.writeEmpty(t);return}this.writeWithContents(t,r)}asObject(){return this}writeEmpty(t){let r=new W("{}");this.hasError&&r.setColor(t.context.colors.red).underline(),t.write(r)}writeWithContents(t,r){t.writeLine("{").withIndent(()=>{t.writeJoined(_e,[...r,...this.suggestions]).newLine()}),t.write("}"),this.hasError&&t.afterNextNewline(()=>{t.writeLine(t.context.colors.red("~".repeat(this.getPrintWidth())))})}};var k=class extends ce{constructor(r){super();this.text=r}getPrintWidth(){return this.text.length}write(r){let n=new W(this.text);this.hasError&&n.underline().setColor(r.context.colors.red),r.write(n)}asObject(){}};var gt=class{fields=[];addField(t,r){return this.fields.push({write(n){let{green:i,dim:o}=n.context.colors;n.write(i(o(`${t}: ${r}`))).addMarginSymbol(i(o("+")))}}),this}write(t){let{colors:{green:r}}=t.context;t.writeLine(r("{")).withIndent(()=>{t.writeJoined(_e,this.fields).newLine()}).write(r("}")).addMarginSymbol(r("+"))}};function er(e,t,r){switch(e.kind){case"MutuallyExclusiveFields":Hu(e,t);break;case"IncludeOnScalar":Gu(e,t);break;case"EmptySelection":zu(e,t,r);break;case"UnknownSelectionField":Yu(e,t);break;case"InvalidSelectionValue":Xu(e,t);break;case"UnknownArgument":ec(e,t);break;case"UnknownInputField":tc(e,t);break;case"RequiredArgumentMissing":rc(e,t);break;case"InvalidArgumentType":nc(e,t);break;case"InvalidArgumentValue":ic(e,t);break;case"ValueTooLarge":oc(e,t);break;case"SomeFieldsMissing":sc(e,t);break;case"TooManyFieldsGiven":ac(e,t);break;case"Union":Xi(e,t,r);break;default:throw new Error("not implemented: "+e.kind)}}function Hu(e,t){let r=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();r&&(r.getField(e.firstField)?.markAsError(),r.getField(e.secondField)?.markAsError()),t.addErrorMessage(n=>`Please ${n.bold("either")} use ${n.green(`\`${e.firstField}\``)} or ${n.green(`\`${e.secondField}\``)}, but ${n.red("not both")} at the same time.`)}function Gu(e,t){let[r,n]=Ve(e.selectionPath),i=e.outputType,o=t.arguments.getDeepSelectionParent(r)?.value;if(o&&(o.getField(n)?.markAsError(),i))for(let s of i.fields)s.isRelation&&o.addSuggestion(new q(s.name,"true"));t.addErrorMessage(s=>{let a=`Invalid scalar field ${s.red(`\`${n}\``)} for ${s.bold("include")} statement`;return i?a+=` on model ${s.bold(i.name)}. ${yt(s)}`:a+=".",a+=`
Note that ${s.bold("include")} statements only accept relation fields.`,a})}function zu(e,t,r){let n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){let i=n.getField("omit")?.value.asObject();if(i){Wu(e,t,i);return}if(n.hasField("select")){Ku(e,t);return}}if(r?.[ue(e.outputType.name)]){Zu(e,t);return}t.addErrorMessage(()=>`Unknown field at "${e.selectionPath.join(".")} selection"`)}function Wu(e,t,r){r.removeAllFields();for(let n of e.outputType.fields)r.addSuggestion(new q(n.name,"false"));t.addErrorMessage(n=>`The ${n.red("omit")} statement includes every field of the model ${n.bold(e.outputType.name)}. At least one field must be included in the result`)}function Ku(e,t){let r=e.outputType,n=t.arguments.getDeepSelectionParent(e.selectionPath)?.value,i=n?.isEmpty()??!1;n&&(n.removeAllFields(),ao(n,r)),t.addErrorMessage(o=>i?`The ${o.red("`select`")} statement for type ${o.bold(r.name)} must not be empty. ${yt(o)}`:`The ${o.red("`select`")} statement for type ${o.bold(r.name)} needs ${o.bold("at least one truthy value")}.`)}function Zu(e,t){let r=new gt;for(let i of e.outputType.fields)i.isRelation||r.addField(i.name,"false");let n=new q("omit",r).makeRequired();if(e.selectionPath.length===0)t.arguments.addSuggestion(n);else{let[i,o]=Ve(e.selectionPath),a=t.arguments.getDeepSelectionParent(i)?.value.asObject()?.getField(o);if(a){let l=a?.value.asObject()??new $e;l.addSuggestion(n),a.value=l}}t.addErrorMessage(i=>`The global ${i.red("omit")} configuration excludes every field of the model ${i.bold(e.outputType.name)}. At least one field must be included in the result`)}function Yu(e,t){let r=lo(e.selectionPath,t);if(r.parentKind!=="unknown"){r.field.markAsError();let n=r.parent;switch(r.parentKind){case"select":ao(n,e.outputType);break;case"include":lc(n,e.outputType);break;case"omit":uc(n,e.outputType);break}}t.addErrorMessage(n=>{let i=[`Unknown field ${n.red(`\`${r.fieldName}\``)}`];return r.parentKind!=="unknown"&&i.push(`for ${n.bold(r.parentKind)} statement`),i.push(`on model ${n.bold(`\`${e.outputType.name}\``)}.`),i.push(yt(n)),i.join(" ")})}function Xu(e,t){let r=lo(e.selectionPath,t);r.parentKind!=="unknown"&&r.field.value.markAsError(),t.addErrorMessage(n=>`Invalid value for selection field \`${n.red(r.fieldName)}\`: ${e.underlyingError}`)}function ec(e,t){let r=e.argumentPath[0],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&(n.getField(r)?.markAsError(),cc(n,e.arguments)),t.addErrorMessage(i=>oo(i,r,e.arguments.map(o=>o.name)))}function tc(e,t){let[r,n]=Ve(e.argumentPath),i=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(i){i.getDeepField(e.argumentPath)?.markAsError();let o=i.getDeepFieldValue(r)?.asObject();o&&uo(o,e.inputType)}t.addErrorMessage(o=>oo(o,n,e.inputType.fields.map(s=>s.name)))}function oo(e,t,r){let n=[`Unknown argument \`${e.red(t)}\`.`],i=dc(t,r);return i&&n.push(`Did you mean \`${e.green(i)}\`?`),r.length>0&&n.push(yt(e)),n.join(" ")}function rc(e,t){let r;t.addErrorMessage(l=>r?.value instanceof k&&r.value.text==="null"?`Argument \`${l.green(o)}\` must not be ${l.red("null")}.`:`Argument \`${l.green(o)}\` is missing.`);let n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(!n)return;let[i,o]=Ve(e.argumentPath),s=new gt,a=n.getDeepFieldValue(i)?.asObject();if(a){if(r=a.getField(o),r&&a.removeField(o),e.inputTypes.length===1&&e.inputTypes[0].kind==="object"){for(let l of e.inputTypes[0].fields)s.addField(l.name,l.typeNames.join(" | "));a.addSuggestion(new q(o,s).makeRequired())}else{let l=e.inputTypes.map(so).join(" | ");a.addSuggestion(new q(o,l).makeRequired())}if(e.dependentArgumentPath){n.getDeepField(e.dependentArgumentPath)?.markAsError();let[,l]=Ve(e.dependentArgumentPath);t.addErrorMessage(u=>`Argument \`${u.green(o)}\` is required because argument \`${u.green(l)}\` was provided.`)}}}function so(e){return e.kind==="list"?`${so(e.elementType)}[]`:e.name}function nc(e,t){let r=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&n.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(i=>{let o=ir("or",e.argument.typeNames.map(s=>i.green(s)));return`Argument \`${i.bold(r)}\`: Invalid value provided. Expected ${o}, provided ${i.red(e.inferredType)}.`})}function ic(e,t){let r=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();n&&n.getDeepFieldValue(e.argumentPath)?.markAsError(),t.addErrorMessage(i=>{let o=[`Invalid value for argument \`${i.bold(r)}\``];if(e.underlyingError&&o.push(`: ${e.underlyingError}`),o.push("."),e.argument.typeNames.length>0){let s=ir("or",e.argument.typeNames.map(a=>i.green(a)));o.push(` Expected ${s}.`)}return o.join("")})}function oc(e,t){let r=e.argument.name,n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),i;if(n){let s=n.getDeepField(e.argumentPath)?.value;s?.markAsError(),s instanceof k&&(i=s.text)}t.addErrorMessage(o=>{let s=["Unable to fit value"];return i&&s.push(o.red(i)),s.push(`into a 64-bit signed integer for field \`${o.bold(r)}\``),s.join(" ")})}function sc(e,t){let r=e.argumentPath[e.argumentPath.length-1],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject();if(n){let i=n.getDeepFieldValue(e.argumentPath)?.asObject();i&&uo(i,e.inputType)}t.addErrorMessage(i=>{let o=[`Argument \`${i.bold(r)}\` of type ${i.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1?e.constraints.requiredFields?o.push(`${i.green("at least one of")} ${ir("or",e.constraints.requiredFields.map(s=>`\`${i.bold(s)}\``))} arguments.`):o.push(`${i.green("at least one")} argument.`):o.push(`${i.green(`at least ${e.constraints.minFieldCount}`)} arguments.`),o.push(yt(i)),o.join(" ")})}function ac(e,t){let r=e.argumentPath[e.argumentPath.length-1],n=t.arguments.getDeepSubSelectionValue(e.selectionPath)?.asObject(),i=[];if(n){let o=n.getDeepFieldValue(e.argumentPath)?.asObject();o&&(o.markAsError(),i=Object.keys(o.getFields()))}t.addErrorMessage(o=>{let s=[`Argument \`${o.bold(r)}\` of type ${o.bold(e.inputType.name)} needs`];return e.constraints.minFieldCount===1&&e.constraints.maxFieldCount==1?s.push(`${o.green("exactly one")} argument,`):e.constraints.maxFieldCount==1?s.push(`${o.green("at most one")} argument,`):s.push(`${o.green(`at most ${e.constraints.maxFieldCount}`)} arguments,`),s.push(`but you provided ${ir("and",i.map(a=>o.red(a)))}. Please choose`),e.constraints.maxFieldCount===1?s.push("one."):s.push(`${e.constraints.maxFieldCount}.`),s.join(" ")})}function ao(e,t){for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new q(r.name,"true"))}function lc(e,t){for(let r of t.fields)r.isRelation&&!e.hasField(r.name)&&e.addSuggestion(new q(r.name,"true"))}function uc(e,t){for(let r of t.fields)!e.hasField(r.name)&&!r.isRelation&&e.addSuggestion(new q(r.name,"true"))}function cc(e,t){for(let r of t)e.hasField(r.name)||e.addSuggestion(new q(r.name,r.typeNames.join(" | ")))}function lo(e,t){let[r,n]=Ve(e),i=t.arguments.getDeepSubSelectionValue(r)?.asObject();if(!i)return{parentKind:"unknown",fieldName:n};let o=i.getFieldValue("select")?.asObject(),s=i.getFieldValue("include")?.asObject(),a=i.getFieldValue("omit")?.asObject(),l=o?.getField(n);return o&&l?{parentKind:"select",parent:o,field:l,fieldName:n}:(l=s?.getField(n),s&&l?{parentKind:"include",field:l,parent:s,fieldName:n}:(l=a?.getField(n),a&&l?{parentKind:"omit",field:l,parent:a,fieldName:n}:{parentKind:"unknown",fieldName:n}))}function uo(e,t){if(t.kind==="object")for(let r of t.fields)e.hasField(r.name)||e.addSuggestion(new q(r.name,r.typeNames.join(" | ")))}function Ve(e){let t=[...e],r=t.pop();if(!r)throw new Error("unexpected empty path");return[t,r]}function yt({green:e,enabled:t}){return"Available options are "+(t?`listed in ${e("green")}`:"marked with ?")+"."}function ir(e,t){if(t.length===1)return t[0];let r=[...t],n=r.pop();return`${r.join(", ")} ${e} ${n}`}var pc=3;function dc(e,t){let r=1/0,n;for(let i of t){let o=(0,io.default)(e,i);o>pc||o<r&&(r=o,n=i)}return n}var po=require("@prisma/client-runtime-utils");var ht=class{modelName;name;typeName;isList;isEnum;constructor(t,r,n,i,o){this.modelName=t,this.name=r,this.typeName=n,this.isList=i,this.isEnum=o}_toGraphQLInputType(){let t=this.isList?"List":"",r=this.isEnum?"Enum":"";return`${t}${r}${this.typeName}FieldRefInput<${this.modelName}>`}};function qe(e){return e instanceof ht}var co=": ",or=class{constructor(t,r){this.name=t;this.value=r}hasError=!1;markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+co.length}write(t){let r=new W(this.name);this.hasError&&r.underline().setColor(t.context.colors.red),t.write(r).write(co).write(this.value)}};var dn=class{arguments;errorMessages=[];constructor(t){this.arguments=t}write(t){t.write(this.arguments)}addErrorMessage(t){this.errorMessages.push(t)}renderAllMessages(t){return this.errorMessages.map(r=>r(t)).join(`
`)}};function je(e){return new dn(mo(e))}function mo(e){let t=new $e;for(let[r,n]of Object.entries(e)){let i=new or(r,fo(n));t.addField(i)}return t}function fo(e){if(typeof e=="string")return new k(JSON.stringify(e));if(typeof e=="number"||typeof e=="boolean")return new k(String(e));if(typeof e=="bigint")return new k(`${e}n`);if(e===null)return new k("null");if(e===void 0)return new k("undefined");if(De(e))return new k(`new Prisma.Decimal("${e.toFixed()}")`);if(e instanceof Uint8Array)return Buffer.isBuffer(e)?new k(`Buffer.alloc(${e.byteLength})`):new k(`new Uint8Array(${e.byteLength})`);if(e instanceof Date){let t=Kt(e)?e.toISOString():"Invalid Date";return new k(`new Date("${t}")`)}return e instanceof po.ObjectEnumValue?new k(`Prisma.${e._getName()}`):qe(e)?new k(`prisma.${ue(e.modelName)}.$fields.${e.name}`):Array.isArray(e)?mc(e):typeof e=="object"?mo(e):new k(Object.prototype.toString.call(e))}function mc(e){let t=new Le;for(let r of e)t.addItem(fo(r));return t}function sr(e,t){let r=t==="pretty"?no:nr,n=e.renderAllMessages(r),i=new Me(0,{colors:r}).write(e).toString();return{message:n,args:i}}function ar({args:e,errors:t,errorFormat:r,callsite:n,originalMethod:i,clientVersion:o,globalOmit:s}){let a=je(e);for(let p of t)er(p,a,s);let{message:l,args:u}=sr(a,r),c=Xt({message:l,callsite:n,originalMethod:i,showColors:r==="pretty",callArguments:u});throw new go.PrismaClientValidationError(c,{clientVersion:o})}function K(e){return e.replace(/^./,t=>t.toLowerCase())}function ho(e,t,r){let n=K(r);return!t.result||!(t.result.$allModels||t.result[n])?e:fc({...e,...yo(t.name,e,t.result.$allModels),...yo(t.name,e,t.result[n])})}function fc(e){let t=new z,r=(n,i)=>t.getOrCreate(n,()=>i.has(n)?[n]:(i.add(n),e[n]?e[n].needs.flatMap(o=>r(o,i)):[n]));return Wt(e,n=>({...n,needs:r(n.name,new Set)}))}function yo(e,t,r){return r?Wt(r,({needs:n,compute:i},o)=>({name:o,needs:n?Object.keys(n).filter(s=>n[s]):[],compute:gc(t,o,i)})):{}}function gc(e,t,r){let n=e?.[t]?.compute;return n?i=>r({...i,[t]:n(i)}):r}function wo(e,t){if(!t)return e;let r={...e};for(let n of Object.values(t))if(e[n.name])for(let i of n.needs)r[i]=!0;return r}function bo(e,t){if(!t)return e;let r={...e};for(let n of Object.values(t))if(!e[n.name])for(let i of n.needs)delete r[i];return r}var lr=class{constructor(t,r){this.extension=t;this.previous=r}computedFieldsCache=new z;modelExtensionsCache=new z;queryCallbacksCache=new z;clientExtensions=rt(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions());batchCallbacks=rt(()=>{let t=this.previous?.getAllBatchQueryCallbacks()??[],r=this.extension.query?.$__internalBatch;return r?t.concat(r):t});getAllComputedFields(t){return this.computedFieldsCache.getOrCreate(t,()=>ho(this.previous?.getAllComputedFields(t),this.extension,t))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(t){return this.modelExtensionsCache.getOrCreate(t,()=>{let r=K(t);return!this.extension.model||!(this.extension.model[r]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(t):{...this.previous?.getAllModelExtensions(t),...this.extension.model.$allModels,...this.extension.model[r]}})}getAllQueryCallbacks(t,r){return this.queryCallbacksCache.getOrCreate(`${t}:${r}`,()=>{let n=this.previous?.getAllQueryCallbacks(t,r)??[],i=[],o=this.extension.query;return!o||!(o[t]||o.$allModels||o[r]||o.$allOperations)?n:(o[t]!==void 0&&(o[t][r]!==void 0&&i.push(o[t][r]),o[t].$allOperations!==void 0&&i.push(o[t].$allOperations)),t!=="$none"&&o.$allModels!==void 0&&(o.$allModels[r]!==void 0&&i.push(o.$allModels[r]),o.$allModels.$allOperations!==void 0&&i.push(o.$allModels.$allOperations)),o[r]!==void 0&&i.push(o[r]),o.$allOperations!==void 0&&i.push(o.$allOperations),n.concat(i))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},Ue=class e{constructor(t){this.head=t}static empty(){return new e}static single(t){return new e(new lr(t))}isEmpty(){return this.head===void 0}append(t){return new e(new lr(t,this.head))}getAllComputedFields(t){return this.head?.getAllComputedFields(t)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(t){return this.head?.getAllModelExtensions(t)}getAllQueryCallbacks(t,r){return this.head?.getAllQueryCallbacks(t,r)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}};var ur=class{constructor(t){this.name=t}};function xo(e){return e instanceof ur}function Eo(e){return new ur(e)}var Po=Symbol(),wt=class{constructor(t){if(t!==Po)throw new Error("Skip instance can not be constructed directly")}ifUndefined(t){return t===void 0?cr:t}},cr=new wt(Po);function Z(e){return e instanceof wt}var yc={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},To="explicitly `undefined` values are not allowed";function pr({modelName:e,action:t,args:r,runtimeDataModel:n,extensions:i=Ue.empty(),callsite:o,clientMethod:s,errorFormat:a,clientVersion:l,previewFeatures:u,globalOmit:c,wrapRawValues:p}){let d=new mn({runtimeDataModel:n,modelName:e,action:t,rootArgs:r,callsite:o,extensions:i,selectionPath:[],argumentPath:[],originalMethod:s,errorFormat:a,clientVersion:l,previewFeatures:u,globalOmit:c,wrapRawValues:p});return{modelName:e,action:yc[t],query:bt(r,d)}}function bt({select:e,include:t,...r}={},n){let i=r.omit;return delete r.omit,{arguments:Ao(r,n),selection:hc(e,t,i,n)}}function hc(e,t,r,n){return e?(t?n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:n.getSelectionPath()}):r&&n.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:n.getSelectionPath()}),Ec(e,n)):wc(n,t,r)}function wc(e,t,r){let n={};return e.modelOrType&&!e.isRawAction()&&(n.$composites=!0,n.$scalars=!0),t&&bc(n,t,e),xc(n,r,e),n}function bc(e,t,r){for(let[n,i]of Object.entries(t)){if(Z(i))continue;let o=r.nestSelection(n);if(fn(i,o),i===!1||i===void 0){e[n]=!1;continue}let s=r.findField(n);if(s&&s.kind!=="object"&&r.throwValidationError({kind:"IncludeOnScalar",selectionPath:r.getSelectionPath().concat(n),outputType:r.getOutputTypeDescription()}),s){e[n]=bt(i===!0?{}:i,o);continue}if(i===!0){e[n]=!0;continue}e[n]=bt(i,o)}}function xc(e,t,r){let n=r.getComputedFields(),i={...r.getGlobalOmit(),...t},o=bo(i,n);for(let[s,a]of Object.entries(o)){if(Z(a))continue;fn(a,r.nestSelection(s));let l=r.findField(s);n?.[s]&&!l||(e[s]=!a)}}function Ec(e,t){let r={},n=t.getComputedFields(),i=wo(e,n);for(let[o,s]of Object.entries(i)){if(Z(s))continue;let a=t.nestSelection(o);fn(s,a);let l=t.findField(o);if(!(n?.[o]&&!l)){if(s===!1||s===void 0||Z(s)){r[o]=!1;continue}if(s===!0){l?.kind==="object"?r[o]=bt({},a):r[o]=!0;continue}r[o]=bt(s,a)}}return r}function So(e,t){if(e===null)return null;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof e=="bigint")return{$type:"BigInt",value:String(e)};if(Ne(e)){if(Kt(e))return{$type:"DateTime",value:e.toISOString()};t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(xo(e))return{$type:"Param",value:e.name};if(qe(e))return{$type:"FieldRef",value:{_ref:e.name,_container:e.modelName}};if(Array.isArray(e))return Pc(e,t);if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:n,byteLength:i}=e;return{$type:"Bytes",value:Buffer.from(r,n,i).toString("base64")}}if(Tc(e))return e.values;if(De(e))return{$type:"Decimal",value:e.toFixed()};if(e instanceof pe.ObjectEnumValue){if(!(0,pe.isDbNull)(e)&&!(0,pe.isJsonNull)(e)&&!(0,pe.isAnyNull)(e))throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:e._getName()}}if(Sc(e))return e.toJSON();if(typeof e=="object")return Ao(e,t);t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:t.getSelectionPath(),argumentPath:t.getArgumentPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(e)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function Ao(e,t){if(t.shouldWrapRawValues()&&e.$type)return{$type:"Raw",value:e};let r={};for(let n in e){let i=e[n],o=t.nestArgument(n);Z(i)||(i!==void 0?r[n]=So(i,o):t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidArgumentValue",argumentPath:o.getArgumentPath(),selectionPath:t.getSelectionPath(),argument:{name:t.getArgumentName(),typeNames:[]},underlyingError:To}))}return r}function Pc(e,t){let r=[];for(let n=0;n<e.length;n++){let i=t.nestArgument(String(n)),o=e[n];if(o===void 0||Z(o)){let s=o===void 0?"undefined":"Prisma.skip";t.throwValidationError({kind:"InvalidArgumentValue",selectionPath:i.getSelectionPath(),argumentPath:i.getArgumentPath(),argument:{name:`${t.getArgumentName()}[${n}]`,typeNames:[]},underlyingError:`Can not use \`${s}\` value within array. Use \`null\` or filter out \`${s}\` values`})}r.push(So(o,i))}return r}function Tc(e){return typeof e=="object"&&e!==null&&e.__prismaRawParameters__===!0}function Sc(e){return typeof e=="object"&&e!==null&&typeof e.toJSON=="function"}function fn(e,t){e===void 0&&t.isPreviewFeatureOn("strictUndefinedChecks")&&t.throwValidationError({kind:"InvalidSelectionValue",selectionPath:t.getSelectionPath(),underlyingError:To})}var mn=class e{constructor(t){this.params=t;this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}modelOrType;throwValidationError(t){ar({errors:[t],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map(t=>({name:t.name,typeName:"boolean",isRelation:t.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(t){return this.params.previewFeatures.includes(t)}shouldWrapRawValues(){return this.params.wrapRawValues??!1}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(t){return this.modelOrType?.fields.find(r=>r.name===t)}nestSelection(t){let r=this.findField(t),n=r?.kind==="object"?r.type:void 0;return new e({...this.params,modelName:n,selectionPath:this.params.selectionPath.concat(t)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[ue(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:ie(this.params.action,"Unknown action")}}nestArgument(t){return new e({...this.params,argumentPath:this.params.argumentPath.concat(t)})}};function vo(e,t){let r=rt(()=>Ac(t));Object.defineProperty(e,"dmmf",{get:()=>r.get()})}function Ac(e){return{datamodel:{models:gn(e.models),enums:gn(e.enums),types:gn(e.types)}}}function gn(e){return Object.entries(e).map(([t,r])=>({name:t,...r}))}var yn=new WeakMap,dr="$$PrismaTypedSql",xt=class{constructor(t,r){yn.set(this,{sql:t,values:r}),Object.defineProperty(this,dr,{value:dr})}get sql(){return yn.get(this).sql}get values(){return yn.get(this).values}};function Co(e){return(...t)=>new xt(e,t)}function mr(e){return e!=null&&e[dr]===dr}var jl=require("@prisma/client-runtime-utils");var Ul=require("node:async_hooks"),Bl=require("node:events");function Et(e){return{getKeys(){return Object.keys(e)},getPropertyValue(t){return e[t]}}}function _(e,t){return{getKeys(){return[e]},getPropertyValue(){return t()}}}function xe(e){let t=new z;return{getKeys(){return e.getKeys()},getPropertyValue(r){return t.getOrCreate(r,()=>e.getPropertyValue(r))},getPropertyDescriptor(r){return e.getPropertyDescriptor?.(r)}}}var fr={enumerable:!0,configurable:!0,writable:!0};function gr(e){let t=new Set(e);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>fr,has:(r,n)=>t.has(n),set:(r,n,i)=>t.add(n)&&Reflect.set(r,n,i),ownKeys:()=>[...t]}}var Ro=Symbol.for("nodejs.util.inspect.custom");function H(e,t){let r=vc(t),n=new Set,i=new Proxy(e,{get(o,s){if(n.has(s))return o[s];let a=r.get(s);return a?a.getPropertyValue(s):o[s]},has(o,s){if(n.has(s))return!0;let a=r.get(s);return a?a.has?.(s)??!0:Reflect.has(o,s)},ownKeys(o){let s=ko(Reflect.ownKeys(o),r),a=ko(Array.from(r.keys()),r);return[...new Set([...s,...a,...n])]},set(o,s,a){return r.get(s)?.getPropertyDescriptor?.(s)?.writable===!1?!1:(n.add(s),Reflect.set(o,s,a))},getOwnPropertyDescriptor(o,s){let a=Reflect.getOwnPropertyDescriptor(o,s);if(a&&!a.configurable)return a;let l=r.get(s);return l?l.getPropertyDescriptor?{...fr,...l?.getPropertyDescriptor(s)}:fr:a},defineProperty(o,s,a){return n.add(s),Reflect.defineProperty(o,s,a)},getPrototypeOf:()=>Object.prototype});return i[Ro]=function(){let o={...this};return delete o[Ro],o},i}function vc(e){let t=new Map;for(let r of e){let n=r.getKeys();for(let i of n)t.set(i,r)}return t}function ko(e,t){return e.filter(r=>t.get(r)?.has?.(r)??!0)}function Be(e){return{getKeys(){return e},has(){return!1},getPropertyValue(){}}}function Io(e){if(e===void 0)return"";let t=je(e);return new Me(0,{colors:nr}).write(t).toString()}var Pt="<unknown>";function Oo(e){var t=e.split(`
`);return t.reduce(function(r,n){var i=kc(n)||Oc(n)||Fc(n)||$c(n)||_c(n);return i&&r.push(i),r},[])}var Cc=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|rsc|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Rc=/\((\S*)(?::(\d+))(?::(\d+))\)/;function kc(e){var t=Cc.exec(e);if(!t)return null;var r=t[2]&&t[2].indexOf("native")===0,n=t[2]&&t[2].indexOf("eval")===0,i=Rc.exec(t[2]);return n&&i!=null&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]),{file:r?null:t[2],methodName:t[1]||Pt,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var Ic=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|rsc|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Oc(e){var t=Ic.exec(e);return t?{file:t[2],methodName:t[1]||Pt,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var Nc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|rsc|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Dc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function Fc(e){var t=Nc.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1,n=Dc.exec(t[3]);return r&&n!=null&&(t[3]=n[1],t[4]=n[2],t[5]=null),{file:t[3],methodName:t[1]||Pt,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var Mc=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function _c(e){var t=Mc.exec(e);return t?{file:t[3],methodName:t[1]||Pt,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var Lc=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function $c(e){var t=Lc.exec(e);return t?{file:t[2],methodName:t[1]||Pt,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var hn=class{getLocation(){return null}},wn=class{_error;constructor(){this._error=new Error}getLocation(){let t=this._error.stack;if(!t)return null;let n=Oo(t).find(i=>{if(!i.file)return!1;let o=sn(i.file);return o!=="<anonymous>"&&!o.includes("@prisma")&&!o.includes("/packages/client/src/runtime/")&&!o.endsWith("/runtime/client.js")&&!o.startsWith("internal/")&&!i.methodName.includes("new ")&&!i.methodName.includes("getCallSite")&&!i.methodName.includes("Proxy.")&&i.methodName.split(".").length<4});return!n||!n.file?null:{fileName:n.file,lineNumber:n.lineNumber,columnNumber:n.column}}};function de(e){return e==="minimal"?typeof $EnabledCallSite=="function"&&e!=="minimal"?new $EnabledCallSite:new hn:new wn}var No={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function Qe(e={}){let t=qc(e);return Object.entries(t).reduce((n,[i,o])=>(No[i]!==void 0?n.select[i]={select:o}:n[i]=o,n),{select:{}})}function qc(e={}){return typeof e._count=="boolean"?{...e,_count:{_all:e._count}}:e}function yr(e={}){return t=>(typeof e._count=="boolean"&&(t._count=t._count._all),t)}function Do(e,t){let r=yr(e);return t({action:"aggregate",unpacker:r,argsMapper:Qe})(e)}function jc(e={}){let{select:t,...r}=e;return typeof t=="object"?Qe({...r,_count:t}):Qe({...r,_count:{_all:!0}})}function Uc(e={}){return typeof e.select=="object"?t=>yr(e)(t)._count:t=>yr(e)(t)._count._all}function Fo(e,t){return t({action:"count",unpacker:Uc(e),argsMapper:jc})(e)}function Bc(e={}){let t=Qe(e);if(Array.isArray(t.by))for(let r of t.by)typeof r=="string"&&(t.select[r]=!0);else typeof t.by=="string"&&(t.select[t.by]=!0);return t}function Qc(e={}){return t=>(typeof e?._count=="boolean"&&t.forEach(r=>{r._count=r._count._all}),t)}function Mo(e,t){return t({action:"groupBy",unpacker:Qc(e),argsMapper:Bc})(e)}function _o(e,t,r){if(t==="aggregate")return n=>Do(n,r);if(t==="count")return n=>Fo(n,r);if(t==="groupBy")return n=>Mo(n,r)}function Lo(e,t){let r=t.fields.filter(i=>!i.relationName),n=Ei(r,"name");return new Proxy({},{get(i,o){if(o in i||typeof o=="symbol")return i[o];let s=n[o];if(s)return new ht(e,o,s.type,s.isList,s.kind==="enum")},...gr(Object.keys(n))})}var $o=e=>Array.isArray(e)?e:e.split("."),bn=(e,t)=>$o(t).reduce((r,n)=>r&&r[n],e),Vo=(e,t,r)=>$o(t).reduceRight((n,i,o,s)=>Object.assign({},bn(e,s.slice(0,o)),{[i]:n}),r);function Jc(e,t){return e===void 0||t===void 0?[]:[...t,"select",e]}function Hc(e,t,r){return t===void 0?e??{}:Vo(t,r,e||!0)}function xn(e,t,r,n,i,o){let a=e._runtimeDataModel.models[t].fields.reduce((l,u)=>({...l,[u.name]:u}),{});return l=>{let u=de(e._errorFormat),c=Jc(n,i),p=Hc(l,o,c),d=r({dataPath:c,callsite:u})(p),f=Gc(e,t);return new Proxy(d,{get(h,x){if(!f.includes(x))return h[x];let L=[a[x].type,r,x],T=[c,p];return xn(e,...L,...T)},...gr([...f,...Object.getOwnPropertyNames(d)])})}}function Gc(e,t){return e._runtimeDataModel.models[t].fields.filter(r=>r.kind==="object").map(r=>r.name)}var zc=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],Wc=["aggregate","count","groupBy"];function En(e,t){let r=e._extensions.getAllModelExtensions(t)??{},n=[Kc(e,t),Yc(e,t),Et(r),_("name",()=>t),_("$name",()=>t),_("$parent",()=>e._appliedParent)];return H({},n)}function Kc(e,t){let r=K(t),n=Object.keys(Fe).concat("count");return{getKeys(){return n},getPropertyValue(i){let o=i,s=a=>l=>{let u=de(e._errorFormat);return e._createPrismaPromise(c=>{let p={args:l,dataPath:[],action:o,model:t,clientMethod:`${r}.${i}`,jsModelName:r,transaction:c,callsite:u};return e._request({...p,...a})},{action:o,args:l,model:t})};return zc.includes(o)?xn(e,t,s):Zc(i)?_o(e,i,s):s({})}}}function Zc(e){return Wc.includes(e)}function Yc(e,t){return xe(_("fields",()=>{let r=e._runtimeDataModel.models[t];return Lo(t,r)}))}function qo(e){return e.replace(/^./,t=>t.toUpperCase())}var Pn=Symbol();function Tt(e){let t=[Xc(e),ep(e),_(Pn,()=>e),_("$parent",()=>e._appliedParent)],r=e._extensions.getAllClientExtensions();return r&&t.push(Et(r)),H(e,t)}function Xc(e){let t=Object.getPrototypeOf(e._originalClient),r=[...new Set(Object.getOwnPropertyNames(t))];return{getKeys(){return r},getPropertyValue(n){return e[n]}}}function ep(e){let t=Object.keys(e._runtimeDataModel.models),r=t.map(K),n=[...new Set(t.concat(r))];return xe({getKeys(){return n},getPropertyValue(i){let o=qo(i);if(e._runtimeDataModel.models[o]!==void 0)return En(e,o);if(e._runtimeDataModel.models[i]!==void 0)return En(e,i)},getPropertyDescriptor(i){if(!r.includes(i))return{enumerable:!1}}})}function jo(e){return e[Pn]?e[Pn]:e}function Uo(e){if(typeof e=="function")return e(this);let t=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(e)},_appliedParent:{value:this,configurable:!0},$on:{value:void 0}});return Tt(t)}function Bo({result:e,modelName:t,select:r,omit:n,extensions:i}){let o=i.getAllComputedFields(t);if(!o)return e;let s=[],a=[];for(let l of Object.values(o)){if(n){if(n[l.name])continue;let u=l.needs.filter(c=>n[c]);u.length>0&&a.push(Be(u))}else if(r){if(!r[l.name])continue;let u=l.needs.filter(c=>!r[c]);u.length>0&&a.push(Be(u))}tp(e,l.needs)&&s.push(rp(l,H(e,s)))}return s.length>0||a.length>0?H(e,[...s,...a]):e}function tp(e,t){return t.every(r=>an(e,r))}function rp(e,t){return xe(_(e.name,()=>e.compute(t)))}function hr({visitor:e,result:t,args:r,runtimeDataModel:n,modelName:i}){if(Array.isArray(t)){for(let s=0;s<t.length;s++)t[s]=hr({result:t[s],args:r,modelName:i,runtimeDataModel:n,visitor:e});return t}let o=e(t,i,r)??t;return r.include&&Qo({includeOrSelect:r.include,result:o,parentModelName:i,runtimeDataModel:n,visitor:e}),r.select&&Qo({includeOrSelect:r.select,result:o,parentModelName:i,runtimeDataModel:n,visitor:e}),o}function Qo({includeOrSelect:e,result:t,parentModelName:r,runtimeDataModel:n,visitor:i}){for(let[o,s]of Object.entries(e)){if(!s||t[o]==null||Z(s))continue;let l=n.models[r].fields.find(c=>c.name===o);if(!l||l.kind!=="object"||!l.relationName)continue;let u=typeof s=="object"?s:{};t[o]=hr({visitor:i,result:t[o],args:u,modelName:l.type,runtimeDataModel:n})}}function Jo({result:e,modelName:t,args:r,extensions:n,runtimeDataModel:i,globalOmit:o}){return n.isEmpty()||e==null||typeof e!="object"||!i.models[t]?e:hr({result:e,args:r??{},modelName:t,runtimeDataModel:i,visitor:(a,l,u)=>{let c=K(l);return Bo({result:a,modelName:c,select:u.select,omit:u.select?void 0:{...o?.[c],...u.omit},extensions:n})}})}var Ee=require("@prisma/client-runtime-utils");var np=["$connect","$disconnect","$on","$transaction","$extends"],Ho=np;function Go(e){if(e instanceof Ee.Sql)return ip(e);if(mr(e))return op(e);if(Array.isArray(e)){let r=[e[0]];for(let n=1;n<e.length;n++)r[n]=St(e[n]);return r}let t={};for(let r in e)t[r]=St(e[r]);return t}function ip(e){return new Ee.Sql(e.strings,e.values)}function op(e){return new xt(e.sql,e.values)}function St(e){if(typeof e!="object"||e==null||e instanceof Ee.ObjectEnumValue||qe(e))return e;if(De(e))return new Ee.Decimal(e.toFixed());if(Ne(e))return new Date(+e);if(ArrayBuffer.isView(e))return e.slice(0);if(Array.isArray(e)){let t=e.length,r;for(r=Array(t);t--;)r[t]=St(e[t]);return r}if(typeof e=="object"){let t={};for(let r in e)r==="__proto__"?Object.defineProperty(t,r,{value:St(e[r]),configurable:!0,enumerable:!0,writable:!0}):t[r]=St(e[r]);return t}ie(e,"Unknown value")}function Wo(e,t,r,n=0){return e._createPrismaPromise(i=>{let o=t.customDataProxyFetch;return"transaction"in t&&i!==void 0&&(t.transaction?.kind==="batch"&&t.transaction.lock.then(),t.transaction=i),n===r.length?e._executeRequest(t):r[n]({model:t.model,operation:t.model?t.action:t.clientMethod,args:Go(t.args??{}),__internalParams:t,query:(s,a=t)=>{let l=a.customDataProxyFetch;return a.customDataProxyFetch=Xo(o,l),a.args=s,Wo(e,a,r,n+1)}})})}function Ko(e,t){let{jsModelName:r,action:n,clientMethod:i}=t,o=r?n:i;if(e._extensions.isEmpty())return e._executeRequest(t);let s=e._extensions.getAllQueryCallbacks(r??"$none",o);return Wo(e,t,s)}function Zo(e){return t=>{let r={requests:t},n=t[0].extensions.getAllBatchQueryCallbacks();return n.length?Yo(r,n,0,e):e(r)}}function Yo(e,t,r,n){if(r===t.length)return n(e);let i=e.customDataProxyFetch,o=e.requests[0].transaction;return t[r]({args:{queries:e.requests.map(s=>({model:s.modelName,operation:s.action,args:s.args})),transaction:o?{isolationLevel:o.kind==="batch"?o.isolationLevel:void 0}:void 0},__internalParams:e,query(s,a=e){let l=a.customDataProxyFetch;return a.customDataProxyFetch=Xo(i,l),Yo(a,t,r+1,n)}})}var zo=e=>e;function Xo(e=zo,t=zo){return r=>e(t(r))}var os=require("@prisma/client-runtime-utils");var At=require("@prisma/client-runtime-utils");function P(e,t){throw new Error(t)}function Tn(e,t){return e===t||e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>Tn(e[r],t[r]))}function Je(e,t){let r=Object.keys(e),n=Object.keys(t);return(r.length<n.length?r:n).every(o=>{if(typeof e[o]==typeof t[o]&&typeof e[o]!="object")return e[o]===t[o];if(At.Decimal.isDecimal(e[o])||At.Decimal.isDecimal(t[o])){let s=es(e[o]),a=es(t[o]);return s&&a&&s.equals(a)}else if(e[o]instanceof Uint8Array||t[o]instanceof Uint8Array){let s=ts(e[o]),a=ts(t[o]);return s&&a&&s.equals(a)}else{if(e[o]instanceof Date||t[o]instanceof Date)return rs(e[o])?.getTime()===rs(t[o])?.getTime();if(typeof e[o]=="bigint"||typeof t[o]=="bigint")return ns(e[o])===ns(t[o]);if(typeof e[o]=="number"||typeof t[o]=="number")return is(e[o])===is(t[o])}return Tn(e[o],t[o])})}function es(e){return At.Decimal.isDecimal(e)?e:typeof e=="number"||typeof e=="string"?new At.Decimal(e):void 0}function ts(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e.buffer,e.byteOffset,e.byteLength):typeof e=="string"?Buffer.from(e,"base64"):void 0}function rs(e){return e instanceof Date?e:typeof e=="string"||typeof e=="number"?new Date(e):void 0}function ns(e){return typeof e=="bigint"?e:typeof e=="number"||typeof e=="string"?BigInt(e):void 0}function is(e){return typeof e=="number"?e:typeof e=="string"?Number(e):void 0}function vt(e){return JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString():ArrayBuffer.isView(r)?Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("base64"):r)}function sp(e){return e!==null&&typeof e=="object"&&typeof e.$type=="string"}function ap(e,t){let r={};for(let n of Object.keys(e))r[n]=t(e[n],n);return r}function me(e){return e===null?e:Array.isArray(e)?e.map(me):typeof e=="object"?sp(e)?lp(e):e.constructor!==null&&e.constructor.name!=="Object"?e:ap(e,me):e}function lp({$type:e,value:t}){switch(e){case"BigInt":return BigInt(t);case"Bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"DateTime":return new Date(t);case"Decimal":return new os.Decimal(t);case"Json":return JSON.parse(t);default:P(t,"Unknown tagged value")}}function wr(e){return e.name==="DriverAdapterError"&&typeof e.cause=="object"}var m={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Character:6,Text:7,Date:8,Time:9,DateTime:10,Json:11,Enum:12,Bytes:13,Set:14,Uuid:15,Int32Array:64,Int64Array:65,FloatArray:66,DoubleArray:67,NumericArray:68,BooleanArray:69,CharacterArray:70,TextArray:71,DateArray:72,TimeArray:73,DateTimeArray:74,JsonArray:75,EnumArray:76,BytesArray:77,UuidArray:78,UnknownNumber:128};var I=class extends Error{name="UserFacingError";code;meta;constructor(t,r,n){super(t),this.code=r,this.meta=n??{}}toQueryResponseErrorObject(){return{error:this.message,user_facing_error:{is_panic:!1,message:this.message,meta:this.meta,error_code:this.code}}}};function He(e){if(!wr(e))throw e;let t=up(e),r=ss(e);throw!t||!r?e:new I(r,t,{driverAdapterError:e})}function An(e){throw wr(e)?new I(`Raw query failed. Code: \`${e.cause.originalCode??"N/A"}\`. Message: \`${e.cause.originalMessage??ss(e)}\``,"P2010",{driverAdapterError:e}):e}function up(e){switch(e.cause.kind){case"AuthenticationFailed":return"P1000";case"DatabaseNotReachable":return"P1001";case"DatabaseDoesNotExist":return"P1003";case"SocketTimeout":return"P1008";case"DatabaseAlreadyExists":return"P1009";case"DatabaseAccessDenied":return"P1010";case"TlsConnectionError":return"P1011";case"ConnectionClosed":return"P1017";case"TransactionAlreadyClosed":return"P1018";case"LengthMismatch":return"P2000";case"UniqueConstraintViolation":return"P2002";case"ForeignKeyConstraintViolation":return"P2003";case"InvalidInputValue":return"P2007";case"UnsupportedNativeDataType":return"P2010";case"NullConstraintViolation":return"P2011";case"ValueOutOfRange":return"P2020";case"TableDoesNotExist":return"P2021";case"ColumnNotFound":return"P2022";case"InvalidIsolationLevel":case"InconsistentColumnData":return"P2023";case"MissingFullTextSearchIndex":return"P2030";case"TransactionWriteConflict":return"P2034";case"GenericJs":return"P2036";case"TooManyConnections":return"P2037";case"postgres":case"sqlite":case"mysql":case"mssql":return;default:P(e.cause,`Unknown error: ${e.cause}`)}}function ss(e){switch(e.cause.kind){case"AuthenticationFailed":return`Authentication failed against the database server, the provided database credentials for \`${e.cause.user??"(not available)"}\` are not valid`;case"DatabaseNotReachable":{let t=e.cause.host&&e.cause.port?`${e.cause.host}:${e.cause.port}`:e.cause.host;return`Can't reach database server${t?` at ${t}`:""}`}case"DatabaseDoesNotExist":return`Database \`${e.cause.db??"(not available)"}\` does not exist on the database server`;case"SocketTimeout":return"Operation has timed out";case"DatabaseAlreadyExists":return`Database \`${e.cause.db??"(not available)"}\` already exists on the database server`;case"DatabaseAccessDenied":return`User was denied access on the database \`${e.cause.db??"(not available)"}\``;case"TlsConnectionError":return`Error opening a TLS connection: ${e.cause.reason}`;case"ConnectionClosed":return"Server has closed the connection.";case"TransactionAlreadyClosed":return e.cause.cause;case"LengthMismatch":return`The provided value for the column is too long for the column's type. Column: ${e.cause.column??"(not available)"}`;case"UniqueConstraintViolation":return`Unique constraint failed on the ${Sn(e.cause.constraint)}`;case"ForeignKeyConstraintViolation":return`Foreign key constraint violated on the ${Sn(e.cause.constraint)}`;case"UnsupportedNativeDataType":return`Failed to deserialize column of type '${e.cause.type}'. If you're using $queryRaw and this column is explicitly marked as \`Unsupported\` in your Prisma schema, try casting this column to any supported Prisma type such as \`String\`.`;case"NullConstraintViolation":return`Null constraint violation on the ${Sn(e.cause.constraint)}`;case"ValueOutOfRange":return`Value out of range for the type: ${e.cause.cause}`;case"TableDoesNotExist":return`The table \`${e.cause.table??"(not available)"}\` does not exist in the current database.`;case"ColumnNotFound":return`The column \`${e.cause.column??"(not available)"}\` does not exist in the current database.`;case"InvalidIsolationLevel":return`Error in connector: Conversion error: ${e.cause.level}`;case"InconsistentColumnData":return`Inconsistent column data: ${e.cause.cause}`;case"MissingFullTextSearchIndex":return"Cannot find a fulltext index to use for the native search, try adding a @@fulltext([Fields...]) to your schema";case"TransactionWriteConflict":return"Transaction failed due to a write conflict or a deadlock. Please retry your transaction";case"GenericJs":return`Error in external connector (id ${e.cause.id})`;case"TooManyConnections":return`Too many database connections opened: ${e.cause.cause}`;case"InvalidInputValue":return`Invalid input value: ${e.cause.message}`;case"sqlite":case"postgres":case"mysql":case"mssql":return;default:P(e.cause,`Unknown error: ${e.cause}`)}}function Sn(e){return e&&"fields"in e?`fields: (${e.fields.map(t=>`\`${t}\``).join(", ")})`:e&&"index"in e?`constraint: \`${e.index}\``:e&&"foreignKey"in e?"foreign key":"(not available)"}function cp(e){if(typeof e!="object"||e===null)return!1;let t=e;return"$type"in t&&t.$type==="Param"||"prisma__type"in t&&t.prisma__type==="param"}function pp(e){return"prisma__type"in e?e.prisma__value?.name:e.value.name}function dp(e,t){let r={};for(let[n,i]of Object.entries(e))if(r[n]=i,cp(i)){let o=pp(i);o&&o in t&&(r[n]=t[o])}return r}function as(e,t,r={}){let n=e.map(o=>t.keys.reduce((s,a)=>(s[a]=me(o[a]),s),{})),i=new Set(t.nestedSelection);return t.arguments.map(o=>{let s=dp(o,r),a=n.findIndex(l=>Je(l,s));if(a===-1)return t.expectNonEmpty?new I("An operation failed because it depends on one or more records that were required but not found","P2025"):null;{let l=Object.entries(e[a]).filter(([u])=>i.has(u));return Object.fromEntries(l)}})}var cs=require("@prisma/client-runtime-utils");var v=class extends I{name="DataMapperError";constructor(t,r){super(t,"P2023",r)}},ls=new WeakMap;function mp(e){let t=ls.get(e);return t||(t=Object.entries(e),ls.set(e,t)),t}function ps(e,t,r){switch(t.type){case"affectedRows":if(typeof e!="number")throw new v(`Expected an affected rows count, got: ${typeof e} (${e})`);return{count:e};case"object":return Cn(e,t.fields,r,t.skipNulls);case"field":return vn(e,"<result>",t.fieldType,r);default:P(t,`Invalid data mapping type: '${t.type}'`)}}function Cn(e,t,r,n){if(e===null)return null;if(Array.isArray(e)){let i=e;return n&&(i=i.filter(o=>o!==null)),i.map(o=>us(o,t,r))}if(typeof e=="object")return us(e,t,r);if(typeof e=="string"){let i;try{i=JSON.parse(e)}catch(o){throw new v("Expected an array or object, got a string that is not valid JSON",{cause:o})}return Cn(i,t,r,n)}throw new v(`Expected an array or an object, got: ${typeof e}`)}function us(e,t,r){if(typeof e!="object")throw new v(`Expected an object, but got '${typeof e}'`);let n={};for(let[i,o]of mp(t))switch(o.type){case"affectedRows":throw new v(`Unexpected 'AffectedRows' node in data mapping for field '${i}'`);case"object":{let{serializedName:s,fields:a,skipNulls:l}=o;if(s!==null&&!Object.hasOwn(e,s))throw new v(`Missing data field (Object): '${i}'; node: ${JSON.stringify(o)}; data: ${JSON.stringify(e)}`);let u=s!==null?e[s]:e;n[i]=Cn(u,a,r,l);break}case"field":{let s=o.dbName;if(Object.hasOwn(e,s))n[i]=fp(e[s],s,o.fieldType,r);else throw new v(`Missing data field (Value): '${s}'; node: ${JSON.stringify(o)}; data: ${JSON.stringify(e)}`)}break;default:P(o,`DataMapper: Invalid data mapping node type: '${o.type}'`)}return n}function fp(e,t,r,n){return e===null?r.arity==="list"?[]:null:r.arity==="list"?e.map((o,s)=>vn(o,`${t}[${s}]`,r,n)):vn(e,t,r,n)}function vn(e,t,r,n){switch(r.type){case"unsupported":return e;case"string":{if(typeof e!="string")throw new v(`Expected a string in column '${t}', got ${typeof e}: ${e}`);return e}case"int":switch(typeof e){case"number":return Math.trunc(e);case"string":{let i=Math.trunc(Number(e));if(Number.isNaN(i)||!Number.isFinite(i))throw new v(`Expected an integer in column '${t}', got string: ${e}`);if(!Number.isSafeInteger(i))throw new v(`Integer value in column '${t}' is too large to represent as a JavaScript number without loss of precision, got: ${e}. Consider using BigInt type.`);return i}default:throw new v(`Expected an integer in column '${t}', got ${typeof e}: ${e}`)}case"bigint":{if(typeof e!="number"&&typeof e!="string")throw new v(`Expected a bigint in column '${t}', got ${typeof e}: ${e}`);return{$type:"BigInt",value:e}}case"float":{if(typeof e=="number")return e;if(typeof e=="string"){let i=Number(e);if(Number.isNaN(i)&&!/^[-+]?nan$/.test(e.toLowerCase()))throw new v(`Expected a float in column '${t}', got string: ${e}`);return i}throw new v(`Expected a float in column '${t}', got ${typeof e}: ${e}`)}case"boolean":{if(typeof e=="boolean")return e;if(typeof e=="number")return e===1;if(typeof e=="string"){if(e==="true"||e==="TRUE"||e==="1")return!0;if(e==="false"||e==="FALSE"||e==="0")return!1;throw new v(`Expected a boolean in column '${t}', got ${typeof e}: ${e}`)}if(Array.isArray(e)||e instanceof Uint8Array){for(let i of e)if(i!==0)return!0;return!1}throw new v(`Expected a boolean in column '${t}', got ${typeof e}: ${e}`)}case"decimal":if(typeof e!="number"&&typeof e!="string"&&!cs.Decimal.isDecimal(e))throw new v(`Expected a decimal in column '${t}', got ${typeof e}: ${e}`);return{$type:"Decimal",value:e};case"datetime":{if(typeof e=="string")return{$type:"DateTime",value:yp(e)};if(typeof e=="number"||e instanceof Date)return{$type:"DateTime",value:e};throw new v(`Expected a date in column '${t}', got ${typeof e}: ${e}`)}case"object":return{$type:"Json",value:vt(e)};case"json":return{$type:"Json",value:`${e}`};case"bytes":{switch(r.encoding){case"base64":if(typeof e!="string")throw new v(`Expected a base64-encoded byte array in column '${t}', got ${typeof e}: ${e}`);return{$type:"Bytes",value:e};case"hex":if(typeof e!="string"||!e.startsWith("\\x"))throw new v(`Expected a hex-encoded byte array in column '${t}', got ${typeof e}: ${e}`);return{$type:"Bytes",value:Buffer.from(e.slice(2),"hex").toString("base64")};case"array":if(Array.isArray(e))return{$type:"Bytes",value:Buffer.from(e).toString("base64")};if(e instanceof Uint8Array)return{$type:"Bytes",value:Buffer.from(e).toString("base64")};throw new v(`Expected a byte array in column '${t}', got ${typeof e}: ${e}`);default:P(r.encoding,`DataMapper: Unknown bytes encoding: ${r.encoding}`)}break}case"enum":{let i=n[r.name];if(i===void 0)throw new v(`Unknown enum '${r.name}'`);let o=i[`${e}`];if(o===void 0)throw new v(`Value '${e}' not found in enum '${r.name}'`);return o}default:P(r,`DataMapper: Unknown result type: ${r.type}`)}}var gp=/\d{2}:\d{2}:\d{2}(?:\.\d+)?(Z|[+-]\d{2}(:?\d{2})?)?$/;function yp(e){let t=gp.exec(e);if(t===null)return`${e}T00:00:00Z`;let r=e,[n,i,o]=t;if(i!==void 0&&i!=="Z"&&o===void 0?r=`${e}:00`:i===void 0&&(r=`${e}Z`),n.length===e.length)return`1970-01-01T${r}`;let s=t.index-1;return r[s]===" "&&(r=`${r.slice(0,s)}T${r.slice(s+1)}`),r}function Y(e){if(typeof e!="object")return e;var t,r,n=Object.prototype.toString.call(e);if(n==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){r=new e.constructor;for(t in e)e.hasOwnProperty(t)&&r[t]!==e[t]&&(r[t]=Y(e[t]))}else{r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:Y(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=Y(e[t])}return r}if(n==="[object Array]"){for(t=e.length,r=Array(t);t--;)r[t]=Y(e[t]);return r}return n==="[object Set]"?(r=new Set,e.forEach(function(i){r.add(Y(i))}),r):n==="[object Map]"?(r=new Map,e.forEach(function(i,o){r.set(Y(o),Y(i))}),r):n==="[object Date]"?new Date(+e):n==="[object RegExp]"?(r=new RegExp(e.source,e.flags),r.lastIndex=e.lastIndex,r):n==="[object DataView]"?new e.constructor(Y(e.buffer)):n==="[object ArrayBuffer]"?e.slice(0):n.slice(-6)==="Array]"?new e.constructor(e):e}function hp(e){let t=Object.entries(e);return t.length===0?"":(t.sort(([n],[i])=>n.localeCompare(i)),`/*${t.map(([n,i])=>{let o=encodeURIComponent(n),s=encodeURIComponent(i).replace(/'/g,"\\'");return`${o}='${s}'`}).join(",")}*/`)}function br(e,t){let r={};for(let n of e){let i=n(Y(t));for(let[o,s]of Object.entries(i))s!==void 0&&(r[o]=s)}return r}function ds(e,t){let r=br(e,t);return hp(r)}function ms(e,t){return t?`${e} ${t}`:e}var Ct;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Ct||(Ct={}));function wp(e){switch(e){case"postgresql":case"postgres":case"prisma+postgres":return"postgresql";case"sqlserver":return"mssql";case"mysql":case"sqlite":case"cockroachdb":case"mongodb":return e;default:P(e,`Unknown provider: ${e}`)}}async function xr({query:e,tracingHelper:t,provider:r,onQuery:n,execute:i}){let o=n===void 0?i:async()=>{let s=new Date,a=performance.now(),l=await i(),u=performance.now();return n({timestamp:s,duration:u-a,query:e.sql,params:e.args}),l};return t.isEnabled()?await t.runInChildSpan({name:"db_query",kind:Ct.CLIENT,attributes:{"db.query.text":e.sql,"db.system.name":wp(r)}},o):o()}function Pe(e,t){var r="000000000"+e;return r.substr(r.length-t)}var fs=U(require("node:os"),1);function bp(){try{return fs.default.hostname()}catch{return process.env._CLUSTER_NETWORK_NAME_||process.env.COMPUTERNAME||"hostname"}}var gs=2,xp=Pe(process.pid.toString(36),gs),ys=bp(),Ep=ys.length,Pp=Pe(ys.split("").reduce(function(e,t){return+e+t.charCodeAt(0)},+Ep+36).toString(36),gs);function Rn(){return xp+Pp}function Er(e){return typeof e=="string"&&/^c[a-z0-9]{20,32}$/.test(e)}function kn(e){let n=Math.pow(36,4),i=0;function o(){return Pe((Math.random()*n<<0).toString(36),4)}function s(){return i=i<n?i:0,i++,i-1}function a(){var l="c",u=new Date().getTime().toString(36),c=Pe(s().toString(36),4),p=e(),d=o()+o();return l+u+c+p+d}return a.fingerprint=e,a.isCuid=Er,a}var Tp=kn(Rn);var hs=Tp;var ya=U(aa());var $n=require("node:crypto");var la="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var ud=128,Se,We;function cd(e){!Se||Se.length<e?(Se=Buffer.allocUnsafe(e*ud),$n.webcrypto.getRandomValues(Se),We=0):We+e>Se.length&&($n.webcrypto.getRandomValues(Se),We=0),We+=e}function Vn(e=21){cd(e|=0);let t="";for(let r=We-e;r<We;r++)t+=la[Se[r]&63];return t}var Dt=U(require("node:crypto"),1);var ca="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Ft=32;var pd=16,pa=10,ua=0xffffffffffff;var Ae;(function(e){e.Base32IncorrectEncoding="B32_ENC_INVALID",e.DecodeTimeInvalidCharacter="DEC_TIME_CHAR",e.DecodeTimeValueMalformed="DEC_TIME_MALFORMED",e.EncodeTimeNegative="ENC_TIME_NEG",e.EncodeTimeSizeExceeded="ENC_TIME_SIZE_EXCEED",e.EncodeTimeValueMalformed="ENC_TIME_MALFORMED",e.PRNGDetectFailure="PRNG_DETECT",e.ULIDInvalid="ULID_INVALID",e.Unexpected="UNEXPECTED",e.UUIDInvalid="UUID_INVALID"})(Ae||(Ae={}));var ve=class extends Error{constructor(t,r){super(`${r} (${t})`),this.name="ULIDError",this.code=t}};function dd(e){let t=Math.floor(e()*Ft);return t===Ft&&(t=Ft-1),ca.charAt(t)}function md(e){let t=fd(),r=t&&(t.crypto||t.msCrypto)||(typeof Dt.default<"u"?Dt.default:null);if(typeof r?.getRandomValues=="function")return()=>{let n=new Uint8Array(1);return r.getRandomValues(n),n[0]/255};if(typeof r?.randomBytes=="function")return()=>r.randomBytes(1).readUInt8()/255;if(Dt.default?.randomBytes)return()=>Dt.default.randomBytes(1).readUInt8()/255;throw new ve(Ae.PRNGDetectFailure,"Failed to find a reliable PRNG")}function fd(){return hd()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function gd(e,t){let r="";for(;e>0;e--)r=dd(t)+r;return r}function yd(e,t=pa){if(isNaN(e))throw new ve(Ae.EncodeTimeValueMalformed,`Time must be a number: ${e}`);if(e>ua)throw new ve(Ae.EncodeTimeSizeExceeded,`Cannot encode a time larger than ${ua}: ${e}`);if(e<0)throw new ve(Ae.EncodeTimeNegative,`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new ve(Ae.EncodeTimeValueMalformed,`Time must be an integer: ${e}`);let r,n="";for(let i=t;i>0;i--)r=e%Ft,n=ca.charAt(r)+n,e=(e-r)/Ft;return n}function hd(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function da(e,t){let r=t||md(),n=!e||isNaN(e)?Date.now():e;return yd(n,pa)+gd(pd,r)}var O=[];for(let e=0;e<256;++e)O.push((e+256).toString(16).slice(1));function Ar(e,t=0){return(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase()}var ma=require("node:crypto"),Cr=new Uint8Array(256),vr=Cr.length;function Ke(){return vr>Cr.length-16&&((0,ma.randomFillSync)(Cr),vr=0),Cr.slice(vr,vr+=16)}var fa=require("node:crypto"),qn={randomUUID:fa.randomUUID};function wd(e,t,r){if(qn.randomUUID&&!t&&!e)return qn.randomUUID();e=e||{};let n=e.random??e.rng?.()??Ke();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Ar(n)}var jn=wd;var Un={};function bd(e,t,r){let n;if(e)n=ga(e.random??e.rng?.()??Ke(),e.msecs,e.seq,t,r);else{let i=Date.now(),o=Ke();xd(Un,i,o),n=ga(o,Un.msecs,Un.seq,t,r)}return t??Ar(n)}function xd(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,e.seq===0&&e.msecs++),e}function ga(e,t,r,n,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return t??=Date.now(),r??=e[6]*127<<24|e[7]<<16|e[8]<<8|e[9],n[i++]=t/1099511627776&255,n[i++]=t/4294967296&255,n[i++]=t/16777216&255,n[i++]=t/65536&255,n[i++]=t/256&255,n[i++]=t&255,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|e[10]&3,n[i++]=e[11],n[i++]=e[12],n[i++]=e[13],n[i++]=e[14],n[i++]=e[15],n}var Bn=bd;var Rr=class{#e={};constructor(){this.register("uuid",new Jn),this.register("cuid",new Hn),this.register("ulid",new Gn),this.register("nanoid",new zn),this.register("product",new Wn)}snapshot(){return Object.create(this.#e,{now:{value:new Qn}})}register(t,r){this.#e[t]=r}},Qn=class{#e=new Date;generate(){return this.#e.toISOString()}},Jn=class{generate(t){if(t===4)return jn();if(t===7)return Bn();throw new Error("Invalid UUID generator arguments")}},Hn=class{generate(t){if(t===1)return hs();if(t===2)return(0,ya.createId)();throw new Error("Invalid CUID generator arguments")}},Gn=class{generate(){return da()}},zn=class{generate(t){if(typeof t=="number")return Vn(t);if(t===void 0)return Vn();throw new Error("Invalid Nanoid generator arguments")}},Wn=class{generate(t,r){if(t===void 0||r===void 0)throw new Error("Invalid Product generator arguments");return Array.isArray(t)&&Array.isArray(r)?t.flatMap(n=>r.map(i=>[n,i])):Array.isArray(t)?t.map(n=>[n,r]):Array.isArray(r)?r.map(n=>[t,n]):[[t,r]]}};function kr(e,t){return e==null?e:typeof e=="string"?kr(JSON.parse(e),t):Array.isArray(e)?Pd(e,t):Ed(e,t)}function Ed(e,t){if(t.pagination){let{skip:r,take:n,cursor:i}=t.pagination;if(r!==null&&r>0||n===0||i!==null&&!Je(e,i))return null}return wa(e,t.nested)}function wa(e,t){for(let[r,n]of Object.entries(t))e[r]=kr(e[r],n);return e}function Pd(e,t){if(t.distinct!==null){let r=t.linkingFields!==null?[...t.distinct,...t.linkingFields]:t.distinct;e=Td(e,r)}return t.pagination&&(e=Sd(e,t.pagination,t.linkingFields)),t.reverse&&e.reverse(),Object.keys(t.nested).length===0?e:e.map(r=>wa(r,t.nested))}function Td(e,t){let r=new Set,n=[];for(let i of e){let o=Ze(i,t);r.has(o)||(r.add(o),n.push(i))}return n}function Sd(e,t,r){if(r===null)return ha(e,t);let n=new Map;for(let o of e){let s=Ze(o,r);n.has(s)||n.set(s,[]),n.get(s).push(o)}let i=Array.from(n.entries());return i.sort(([o],[s])=>o<s?-1:o>s?1:0),i.flatMap(([,o])=>ha(o,t))}function ha(e,{cursor:t,skip:r,take:n}){let i=t!==null?e.findIndex(a=>Je(a,t)):0;if(i===-1)return[];let o=i+(r??0),s=n!==null?o+n:e.length;return e.slice(o,s)}function Ze(e,t){return JSON.stringify(t.map(r=>e[r]))}function Kn(e){return typeof e=="object"&&e!==null&&e.prisma__type==="param"}function Zn(e){return typeof e=="object"&&e!==null&&e.prisma__type==="generatorCall"}function ei(e,t,r,n){let i=e.args.map(o=>G(o,t,r));switch(e.type){case"rawSql":return[Cd(e.sql,i,e.argTypes)];case"templateSql":return(e.chunkable?kd(e.fragments,i,n):[i]).map(s=>{if(n!==void 0&&s.length>n)throw new I("The query parameter limit supported by your database is exceeded.","P2029");return Ad(e.fragments,e.placeholderFormat,s,e.argTypes)});default:P(e.type,"Invalid query type")}}function G(e,t,r){for(;Rd(e);)if(Kn(e)){let n=t[e.prisma__value.name];if(n===void 0)throw new Error(`Missing value for query variable ${e.prisma__value.name}`);e=n}else if(Zn(e)){let{name:n,args:i}=e.prisma__value,o=r[n];if(!o)throw new Error(`Encountered an unknown generator '${n}'`);e=o.generate(...i.map(s=>G(s,t,r)))}else P(e,`Unexpected unevaluated value type: ${e}`);return Array.isArray(e)&&(e=e.map(n=>G(n,t,r))),e}function Ad(e,t,r,n){let i="",o={placeholderNumber:1},s=[],a=[];for(let l of Xn(e,r,n)){if(i+=vd(l,t,o),l.type==="stringChunk")continue;let u=s.length,c=s.push(...ba(l))-u;if(l.argType.arity==="tuple"){if(c%l.argType.elements.length!==0)throw new Error(`Malformed query template. Expected the number of parameters to match the tuple arity, but got ${c} parameters for a tuple of arity ${l.argType.elements.length}.`);for(let p=0;p<c/l.argType.elements.length;p++)a.push(...l.argType.elements)}else for(let p=0;p<c;p++)a.push(l.argType)}return{sql:i,args:s,argTypes:a}}function vd(e,t,r){let n=e.type;switch(n){case"parameter":return Yn(t,r.placeholderNumber++);case"stringChunk":return e.chunk;case"parameterTuple":return`(${e.value.length==0?"NULL":e.value.map(()=>Yn(t,r.placeholderNumber++)).join(",")})`;case"parameterTupleList":return e.value.map(i=>{let o=i.map(()=>Yn(t,r.placeholderNumber++)).join(e.itemSeparator);return`${e.itemPrefix}${o}${e.itemSuffix}`}).join(e.groupSeparator);default:P(n,"Invalid fragment type")}}function Yn(e,t){return e.hasNumbering?`${e.prefix}${t}`:e.prefix}function Cd(e,t,r){return{sql:e,args:t,argTypes:r}}function Rd(e){return Kn(e)||Zn(e)}function*Xn(e,t,r){let n=0;for(let i of e)switch(i.type){case"parameter":{if(n>=t.length)throw new Error(`Malformed query template. Fragments attempt to read over ${t.length} parameters.`);yield{...i,value:t[n],argType:r?.[n]},n++;break}case"stringChunk":{yield i;break}case"parameterTuple":{if(n>=t.length)throw new Error(`Malformed query template. Fragments attempt to read over ${t.length} parameters.`);let o=t[n];yield{...i,value:Array.isArray(o)?o:[o],argType:r?.[n]},n++;break}case"parameterTupleList":{if(n>=t.length)throw new Error(`Malformed query template. Fragments attempt to read over ${t.length} parameters.`);let o=t[n];if(!Array.isArray(o))throw new Error("Malformed query template. Tuple list expected.");if(o.length===0)throw new Error("Malformed query template. Tuple list cannot be empty.");for(let s of o)if(!Array.isArray(s))throw new Error("Malformed query template. Tuple expected.");yield{...i,value:o,argType:r?.[n]},n++;break}}}function*ba(e){switch(e.type){case"parameter":yield e.value;break;case"stringChunk":break;case"parameterTuple":yield*e.value;break;case"parameterTupleList":for(let t of e.value)yield*t;break}}function kd(e,t,r){let n=0,i=0;for(let s of Xn(e,t,void 0)){let a=0;for(let l of ba(s))a++;i=Math.max(i,a),n+=a}let o=[[]];for(let s of Xn(e,t,void 0))switch(s.type){case"parameter":{for(let a of o)a.push(s.value);break}case"stringChunk":break;case"parameterTuple":{let a=s.value.length,l=[];if(r&&o.length===1&&a===i&&n>r&&n-a<r){let u=r-(n-a);l=Id(s.value,u)}else l=[s.value];o=o.flatMap(u=>l.map(c=>[...u,c]));break}case"parameterTupleList":{let a=s.value.reduce((p,d)=>p+d.length,0),l=[],u=[],c=0;for(let p of s.value)r&&o.length===1&&a===i&&u.length>0&&n-a+c+p.length>r&&(l.push(u),u=[],c=0),u.push(p),c+=p.length;u.length>0&&l.push(u),o=o.flatMap(p=>l.map(d=>[...p,d]));break}}return o}function Id(e,t){let r=[];for(let n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}function xa(e){return e.rows.map(t=>t.reduce((r,n,i)=>(r[e.columnNames[i]]=n,r),{}))}function Ea(e){return{columns:e.columnNames,types:e.columnTypes.map(t=>Od(t)),rows:e.rows.map(t=>t.map((r,n)=>Mt(r,e.columnTypes[n])))}}function Mt(e,t){if(e===null)return null;switch(t){case m.Int32:switch(typeof e){case"number":return Math.trunc(e);case"string":return Math.trunc(Number(e));default:throw new Error(`Cannot serialize value of type ${typeof e} as Int32`)}case m.Int32Array:if(!Array.isArray(e))throw new Error(`Cannot serialize value of type ${typeof e} as Int32Array`);return e.map(r=>Mt(r,m.Int32));case m.Int64:switch(typeof e){case"number":return BigInt(Math.trunc(e));case"string":return e;default:throw new Error(`Cannot serialize value of type ${typeof e} as Int64`)}case m.Int64Array:if(!Array.isArray(e))throw new Error(`Cannot serialize value of type ${typeof e} as Int64Array`);return e.map(r=>Mt(r,m.Int64));case m.Json:switch(typeof e){case"string":return JSON.parse(e);default:throw new Error(`Cannot serialize value of type ${typeof e} as Json`)}case m.JsonArray:if(!Array.isArray(e))throw new Error(`Cannot serialize value of type ${typeof e} as JsonArray`);return e.map(r=>Mt(r,m.Json));case m.Boolean:switch(typeof e){case"boolean":return e;case"string":return e==="true"||e==="1";case"number":return e===1;default:throw new Error(`Cannot serialize value of type ${typeof e} as Boolean`)}case m.BooleanArray:if(!Array.isArray(e))throw new Error(`Cannot serialize value of type ${typeof e} as BooleanArray`);return e.map(r=>Mt(r,m.Boolean));default:return e}}function Od(e){switch(e){case m.Int32:return"int";case m.Int64:return"bigint";case m.Float:return"float";case m.Double:return"double";case m.Text:return"string";case m.Enum:return"enum";case m.Bytes:return"bytes";case m.Boolean:return"bool";case m.Character:return"char";case m.Numeric:return"decimal";case m.Json:return"json";case m.Uuid:return"uuid";case m.DateTime:return"datetime";case m.Date:return"date";case m.Time:return"time";case m.Int32Array:return"int-array";case m.Int64Array:return"bigint-array";case m.FloatArray:return"float-array";case m.DoubleArray:return"double-array";case m.TextArray:return"string-array";case m.EnumArray:return"string-array";case m.BytesArray:return"bytes-array";case m.BooleanArray:return"bool-array";case m.CharacterArray:return"char-array";case m.NumericArray:return"decimal-array";case m.JsonArray:return"json-array";case m.UuidArray:return"uuid-array";case m.DateTimeArray:return"datetime-array";case m.DateArray:return"date-array";case m.TimeArray:return"time-array";case m.UnknownNumber:return"unknown";case m.Set:return"string";default:P(e,`Unexpected column type: ${e}`)}}function Pa(e,t,r){if(!t.every(n=>ti(e,n))){let n=Nd(e,r),i=Dd(r);throw new I(n,i,r.context)}}function ti(e,t){switch(t.type){case"rowCountEq":return Array.isArray(e)?e.length===t.args:e===null?t.args===0:t.args===1;case"rowCountNeq":return Array.isArray(e)?e.length!==t.args:e===null?t.args!==0:t.args!==1;case"affectedRowCountEq":return e===t.args;case"never":return!1;default:P(t,`Unknown rule type: ${t.type}`)}}function Nd(e,t){switch(t.error_identifier){case"RELATION_VIOLATION":return`The change you are trying to make would violate the required relation '${t.context.relation}' between the \`${t.context.modelA}\` and \`${t.context.modelB}\` models.`;case"MISSING_RECORD":return`An operation failed because it depends on one or more records that were required but not found. No record was found for ${t.context.operation}.`;case"MISSING_RELATED_RECORD":{let r=t.context.neededFor?` (needed to ${t.context.neededFor})`:"";return`An operation failed because it depends on one or more records that were required but not found. No '${t.context.model}' record${r} was found for ${t.context.operation} on ${t.context.relationType} relation '${t.context.relation}'.`}case"INCOMPLETE_CONNECT_INPUT":return`An operation failed because it depends on one or more records that were required but not found. Expected ${t.context.expectedRows} records to be connected, found only ${Array.isArray(e)?e.length:e}.`;case"INCOMPLETE_CONNECT_OUTPUT":return`The required connected records were not found. Expected ${t.context.expectedRows} records to be connected after connect operation on ${t.context.relationType} relation '${t.context.relation}', found ${Array.isArray(e)?e.length:e}.`;case"RECORDS_NOT_CONNECTED":return`The records for relation \`${t.context.relation}\` between the \`${t.context.parent}\` and \`${t.context.child}\` models are not connected.`;default:P(t,`Unknown error identifier: ${t}`)}}function Dd(e){switch(e.error_identifier){case"RELATION_VIOLATION":return"P2014";case"RECORDS_NOT_CONNECTED":return"P2017";case"INCOMPLETE_CONNECT_OUTPUT":return"P2018";case"MISSING_RECORD":case"MISSING_RELATED_RECORD":case"INCOMPLETE_CONNECT_INPUT":return"P2025";default:P(e,`Unknown error identifier: ${e}`)}}var _t=class e{#e;#t=new Rr;#r;#n;#i;#o;#a;constructor({onQuery:t,tracingHelper:r,serializer:n,rawSerializer:i,provider:o,connectionInfo:s}){this.#e=t,this.#r=r,this.#n=n,this.#i=i??n,this.#o=o,this.#a=s}static forSql(t){return new e({onQuery:t.onQuery,tracingHelper:t.tracingHelper,serializer:xa,rawSerializer:Ea,provider:t.provider,connectionInfo:t.connectionInfo})}async run(t,r){let{value:n}=await this.interpretNode(t,{...r,generators:this.#t.snapshot()}).catch(i=>He(i));return n}async interpretNode(t,r){switch(t.type){case"value":return{value:G(t.args,r.scope,r.generators)};case"seq":{let n;for(let i of t.args)n=await this.interpretNode(i,r);return n??{value:void 0}}case"get":return{value:r.scope[t.args.name]};case"let":{let n=Object.create(r.scope);for(let i of t.args.bindings){let{value:o}=await this.interpretNode(i.expr,{...r,scope:n});n[i.name]=o}return this.interpretNode(t.args.expr,{...r,scope:n})}case"getFirstNonEmpty":{for(let n of t.args.names){let i=r.scope[n];if(!Ta(i))return{value:i}}return{value:[]}}case"concat":{let n=await Promise.all(t.args.map(i=>this.interpretNode(i,r).then(o=>o.value)));return{value:n.length>0?n.reduce((i,o)=>i.concat(ri(o)),[]):[]}}case"sum":{let n=await Promise.all(t.args.map(i=>this.interpretNode(i,r).then(o=>o.value)));return{value:n.length>0?n.reduce((i,o)=>X(i)+X(o)):0}}case"execute":{let n=ei(t.args,r.scope,r.generators,this.#s()),i=0;for(let o of n){let s=Sa(o,r.sqlCommenter);i+=await this.#l(s,r.queryable,()=>r.queryable.executeRaw(s).catch(a=>t.args.type==="rawSql"?An(a):He(a)))}return{value:i}}case"query":{let n=ei(t.args,r.scope,r.generators,this.#s()),i;for(let o of n){let s=Sa(o,r.sqlCommenter),a=await this.#l(s,r.queryable,()=>r.queryable.queryRaw(s).catch(l=>t.args.type==="rawSql"?An(l):He(l)));i===void 0?i=a:(i.rows.push(...a.rows),i.lastInsertId=a.lastInsertId)}return{value:t.args.type==="rawSql"?this.#i(i):this.#n(i),lastInsertId:i?.lastInsertId}}case"reverse":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args,r);return{value:Array.isArray(n)?n.reverse():n,lastInsertId:i}}case"unique":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args,r);if(!Array.isArray(n))return{value:n,lastInsertId:i};if(n.length>1)throw new Error(`Expected zero or one element, got ${n.length}`);return{value:n[0]??null,lastInsertId:i}}case"required":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args,r);if(Ta(n))throw new Error("Required value is empty");return{value:n,lastInsertId:i}}case"mapField":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.records,r);return{value:Aa(n,t.args.field),lastInsertId:i}}case"join":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.parent,r);if(n===null)return{value:null,lastInsertId:i};let o=await Promise.all(t.args.children.map(async s=>({joinExpr:s,childRecords:(await this.interpretNode(s.child,r)).value})));return{value:Fd(n,o),lastInsertId:i}}case"transaction":{if(!r.transactionManager.enabled)return this.interpretNode(t.args,r);let n=r.transactionManager.manager,i=await n.startInternalTransaction(),o=await n.getTransaction(i,"query");try{let s=await this.interpretNode(t.args,{...r,queryable:o});return await n.commitTransaction(i.id),s}catch(s){throw await n.rollbackTransaction(i.id),s}}case"dataMap":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.expr,r);return{value:ps(n,t.args.structure,t.args.enums),lastInsertId:i}}case"validate":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.expr,r);return Pa(n,t.args.rules,t.args),{value:n,lastInsertId:i}}case"if":{let{value:n}=await this.interpretNode(t.args.value,r);return ti(n,t.args.rule)?await this.interpretNode(t.args.then,r):await this.interpretNode(t.args.else,r)}case"unit":return{value:void 0};case"diff":{let{value:n}=await this.interpretNode(t.args.from,r),{value:i}=await this.interpretNode(t.args.to,r),o=a=>a!==null?Ze(Ir(a),t.args.fields):null,s=new Set(ri(i).map(o));return{value:ri(n).filter(a=>!s.has(o(a)))}}case"process":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.expr,r);return{value:kr(n,t.args.operations),lastInsertId:i}}case"initializeRecord":{let{lastInsertId:n}=await this.interpretNode(t.args.expr,r),i={};for(let[o,s]of Object.entries(t.args.fields))i[o]=Md(s,n,r.scope,r.generators);return{value:i,lastInsertId:n}}case"mapRecord":{let{value:n,lastInsertId:i}=await this.interpretNode(t.args.expr,r),o=n===null?{}:Ir(n);for(let[s,a]of Object.entries(t.args.fields))o[s]=_d(a,o[s],r.scope,r.generators);return{value:o,lastInsertId:i}}default:P(t,`Unexpected node type: ${t.type}`)}}#s(){return this.#a?.maxBindValues!==void 0?this.#a.maxBindValues:this.#u()}#u(){if(this.#o!==void 0)switch(this.#o){case"cockroachdb":case"postgres":case"postgresql":case"prisma+postgres":return 32766;case"mysql":return 65535;case"sqlite":return 999;case"sqlserver":return 2098;case"mongodb":return;default:P(this.#o,`Unexpected provider: ${this.#o}`)}}#l(t,r,n){return xr({query:t,execute:n,provider:this.#o??r.provider,tracingHelper:this.#r,onQuery:this.#e})}};function Ta(e){return Array.isArray(e)?e.length===0:e==null}function ri(e){return Array.isArray(e)?e:[e]}function X(e){if(typeof e=="number")return e;if(typeof e=="string")return Number(e);throw new Error(`Expected number, got ${typeof e}`)}function Ir(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Expected object, got ${typeof e}`)}function Aa(e,t){return Array.isArray(e)?e.map(r=>Aa(r,t)):typeof e=="object"&&e!==null?e[t]??null:e}function Fd(e,t){for(let{joinExpr:r,childRecords:n}of t){let i=r.on.map(([a])=>a),o=r.on.map(([,a])=>a),s={};for(let a of Array.isArray(e)?e:[e]){let l=Ir(a),u=Ze(l,i);s[u]||(s[u]=[]),s[u].push(l),r.isRelationUnique?l[r.parentField]=null:l[r.parentField]=[]}for(let a of Array.isArray(n)?n:[n]){if(a===null)continue;let l=Ze(Ir(a),o);for(let u of s[l]??[])r.isRelationUnique?u[r.parentField]=a:u[r.parentField].push(a)}}return e}function Md(e,t,r,n){switch(e.type){case"value":return G(e.value,r,n);case"lastInsertId":return t;default:P(e,`Unexpected field initializer type: ${e.type}`)}}function _d(e,t,r,n){switch(e.type){case"set":return G(e.value,r,n);case"add":return X(t)+X(G(e.value,r,n));case"subtract":return X(t)-X(G(e.value,r,n));case"multiply":return X(t)*X(G(e.value,r,n));case"divide":{let i=X(t),o=X(G(e.value,r,n));return o===0?null:i/o}default:P(e,`Unexpected field operation type: ${e.type}`)}}function Sa(e,t){if(!t||t.plugins.length===0)return e;let r=ds(t.plugins,{query:t.queryInfo,sql:e.sql});return r?{...e,sql:ms(e.sql,r)}:e}async function Ld(){return globalThis.crypto??await import("node:crypto")}async function va(){return(await Ld()).randomUUID()}async function Ca(e,t){return new Promise(r=>{e.addEventListener(t,r,{once:!0})})}var B=class extends I{name="TransactionManagerError";constructor(t,r){super("Transaction API error: "+t,"P2028",r)}},Lt=class extends B{constructor(){super("Transaction not found. Transaction ID is invalid, refers to an old closed transaction Prisma doesn't have information about anymore, or was obtained before disconnecting.")}},Or=class extends B{constructor(t){super(`Transaction already closed: A ${t} cannot be executed on a committed transaction.`)}},Nr=class extends B{constructor(t){super(`Transaction already closed: A ${t} cannot be executed on a transaction that was rolled back.`)}},Dr=class extends B{constructor(){super("Unable to start a transaction in the given time.")}},Fr=class extends B{constructor(t,{timeout:r,timeTaken:n}){super(`A ${t} cannot be executed on an expired transaction. The timeout for this transaction was ${r} ms, however ${n} ms passed since the start of the transaction. Consider increasing the interactive transaction timeout or doing less work in the transaction.`,{operation:t,timeout:r,timeTaken:n})}},Ye=class extends B{constructor(t){super(`Internal Consistency Error: ${t}`)}},Mr=class extends B{constructor(t){super(`Invalid isolation level: ${t}`,{isolationLevel:t})}};var $d=100,Xe=F("prisma:client:transactionManager"),Vd=()=>({sql:"COMMIT",args:[],argTypes:[]}),qd=()=>({sql:"ROLLBACK",args:[],argTypes:[]}),jd=()=>({sql:'-- Implicit "COMMIT" query via underlying driver',args:[],argTypes:[]}),Ud=()=>({sql:'-- Implicit "ROLLBACK" query via underlying driver',args:[],argTypes:[]}),$t=class{transactions=new Map;closedTransactions=[];driverAdapter;transactionOptions;tracingHelper;#e;#t;constructor({driverAdapter:t,transactionOptions:r,tracingHelper:n,onQuery:i,provider:o}){this.driverAdapter=t,this.transactionOptions=r,this.tracingHelper=n,this.#e=i,this.#t=o}async startInternalTransaction(t){let r=t!==void 0?this.#a(t):{};return await this.tracingHelper.runInChildSpan("start_transaction",()=>this.#r(r))}async startTransaction(t){let r=t!==void 0?this.#a(t):this.transactionOptions;return await this.tracingHelper.runInChildSpan("start_transaction",()=>this.#r(r))}async#r(t){let r={id:await va(),status:"waiting",timer:void 0,timeout:t.timeout,startedAt:Date.now(),transaction:void 0},n=new AbortController,i=Ra(()=>n.abort(),t.maxWait);i?.unref?.();let o=this.driverAdapter.startTransaction(t.isolationLevel).catch(He);switch(r.transaction=await Promise.race([o.finally(()=>clearTimeout(i)),Ca(n.signal,"abort").then(()=>{})]),this.transactions.set(r.id,r),r.status){case"waiting":if(n.signal.aborted)throw o.then(s=>s.rollback()).catch(s=>Xe("error in discarded transaction:",s)),await this.#o(r,"timed_out"),new Dr;return r.status="running",r.timer=this.#i(r.id,t.timeout),{id:r.id};case"timed_out":case"running":case"committed":case"rolled_back":throw new Ye(`Transaction in invalid state ${r.status} although it just finished startup.`);default:P(r.status,"Unknown transaction status.")}}async commitTransaction(t){return await this.tracingHelper.runInChildSpan("commit_transaction",async()=>{let r=this.#n(t,"commit");await this.#o(r,"committed")})}async rollbackTransaction(t){return await this.tracingHelper.runInChildSpan("rollback_transaction",async()=>{let r=this.#n(t,"rollback");await this.#o(r,"rolled_back")})}async getTransaction(t,r){let n=this.#n(t.id,r);if(n.status==="closing"&&(await n.closing,n=this.#n(t.id,r)),!n.transaction)throw new Lt;return n.transaction}#n(t,r){let n=this.transactions.get(t);if(!n){let i=this.closedTransactions.find(o=>o.id===t);if(i)switch(Xe("Transaction already closed.",{transactionId:t,status:i.status}),i.status){case"closing":case"waiting":case"running":throw new Ye("Active transaction found in closed transactions list.");case"committed":throw new Or(r);case"rolled_back":throw new Nr(r);case"timed_out":throw new Fr(r,{timeout:i.timeout,timeTaken:Date.now()-i.startedAt})}else throw Xe("Transaction not found.",t),new Lt}if(["committed","rolled_back","timed_out"].includes(n.status))throw new Ye("Closed transaction found in active transactions map.");return n}async cancelAllTransactions(){await Promise.allSettled([...this.transactions.values()].map(t=>this.#o(t,"rolled_back")))}#i(t,r){let n=Date.now(),i=Ra(async()=>{Xe("Transaction timed out.",{transactionId:t,timeoutStartedAt:n,timeout:r});let o=this.transactions.get(t);o&&["running","waiting"].includes(o.status)?await this.#o(o,"timed_out"):Xe("Transaction already committed or rolled back when timeout happened.",t)},r);return i?.unref?.(),i}async#o(t,r){let n=async()=>{Xe("Closing transaction.",{transactionId:t.id,status:r});try{if(t.transaction&&r==="committed")if(t.transaction.options.usePhantomQuery)await this.#s(jd(),t.transaction,()=>t.transaction.commit());else{let i=Vd();await this.#s(i,t.transaction,()=>t.transaction.executeRaw(i)).then(()=>t.transaction.commit(),o=>{let s=()=>Promise.reject(o);return t.transaction.rollback().then(s,s)})}else if(t.transaction)if(t.transaction.options.usePhantomQuery)await this.#s(Ud(),t.transaction,()=>t.transaction.rollback());else{let i=qd();try{await this.#s(i,t.transaction,()=>t.transaction.executeRaw(i))}finally{await t.transaction.rollback()}}}finally{t.status=r,clearTimeout(t.timer),t.timer=void 0,this.transactions.delete(t.id),this.closedTransactions.push(t),this.closedTransactions.length>$d&&this.closedTransactions.shift()}};t.status==="closing"?(await t.closing,this.#n(t.id,r==="committed"?"commit":"rollback")):await Object.assign(t,{status:"closing",reason:r,closing:n()}).closing}#a(t){if(!t.timeout)throw new B("timeout is required");if(!t.maxWait)throw new B("maxWait is required");if(t.isolationLevel==="SNAPSHOT")throw new Mr(t.isolationLevel);return{...t,timeout:t.timeout,maxWait:t.maxWait}}#s(t,r,n){return xr({query:t,execute:n,provider:this.#t??r.provider,tracingHelper:this.tracingHelper,onQuery:this.#e})}};function Ra(e,t){return t!==void 0?setTimeout(e,t):void 0}var D=require("@prisma/client-runtime-utils");function ka(e){return new ni(e).deserialize()}function Bd(e){return Buffer.from(e,"base64url")}var ni=class{#e;#t;#r=0;constructor(t){this.#e=t;let r=Bd(t.graph);this.#t=new DataView(r.buffer,r.byteOffset,r.byteLength)}deserialize(){let{inputNodeCount:t,outputNodeCount:r,rootCount:n}=this.#s(),i=this.#u(t),o=this.#l(r),s=this.#p(n);return{strings:this.#e.strings,inputNodes:i,outputNodes:o,roots:s}}#n(){let t=0,r=0,n;do n=this.#t.getUint8(this.#r++),t|=(n&127)<<r,r+=7;while(n>=128);return t}#i(){let t=this.#n();return t===0?void 0:t-1}#o(){let t=this.#t.getUint8(this.#r);return this.#r+=1,t}#a(){let t=this.#t.getUint16(this.#r,!0);return this.#r+=2,t}#s(){let t=this.#n(),r=this.#n(),n=this.#n();return{inputNodeCount:t,outputNodeCount:r,rootCount:n}}#u(t){let r=[];for(let n=0;n<t;n++){let i=this.#n(),o={};for(let s=0;s<i;s++){let a=this.#n(),l=this.#a(),u=this.#i(),c=this.#i(),d={flags:this.#o()};l!==0&&(d.scalarMask=l),u!==void 0&&(d.childNodeId=u),c!==void 0&&(d.enumNameIndex=c),o[a]=d}r.push({edges:o})}return r}#l(t){let r=[];for(let n=0;n<t;n++){let i=this.#n(),o={};for(let s=0;s<i;s++){let a=this.#n(),l=this.#i(),u=this.#i(),c={};l!==void 0&&(c.argsNodeId=l),u!==void 0&&(c.outputNodeId=u),o[a]=c}r.push({edges:o})}return r}#p(t){let r={};for(let n=0;n<t;n++){let i=this.#n(),o=this.#i(),s=this.#i(),a=this.#e.strings[i],l={};o!==void 0&&(l.argsNodeId=o),s!==void 0&&(l.outputNodeId=s),r[a]=l}return r}};var Vt=class e{#e;#t;#r;constructor(t,r){this.#e=t,this.#r=r,this.#t=new Map;for(let n=0;n<t.strings.length;n++)this.#t.set(t.strings[n],n)}static deserialize(t,r){let n=ka(t);return new e(n,r)}static fromData(t,r){return new e(t,r)}root(t){let r=this.#e.roots[t];if(r)return{argsNodeId:r.argsNodeId,outputNodeId:r.outputNodeId}}inputNode(t){if(!(t===void 0||t<0||t>=this.#e.inputNodes.length))return{id:t}}outputNode(t){if(!(t===void 0||t<0||t>=this.#e.outputNodes.length))return{id:t}}inputEdge(t,r){if(!t)return;let n=this.#e.inputNodes[t.id];if(!n)return;let i=this.#t.get(r);if(i===void 0)return;let o=n.edges[i];if(o)return{flags:o.flags,childNodeId:o.childNodeId,scalarMask:o.scalarMask??0,enumNameIndex:o.enumNameIndex}}outputEdge(t,r){if(!t)return;let n=this.#e.outputNodes[t.id];if(!n)return;let i=this.#t.get(r);if(i===void 0)return;let o=n.edges[i];if(o)return{argsNodeId:o.argsNodeId,outputNodeId:o.outputNodeId}}enumValues(t){if(t?.enumNameIndex===void 0)return;let r=this.#e.strings[t.enumNameIndex];if(r)return this.#r(r)}getString(t){return this.#e.strings[t]}},ee={ParamScalar:1,ParamEnum:2,ParamListScalar:4,ParamListEnum:8,ListObject:16,Object:32},N={String:1,Int:2,BigInt:4,Float:8,Decimal:16,Boolean:32,DateTime:64,Json:128,Bytes:256};function te(e,t){return(e.flags&t)!==0}function he(e){return e.scalarMask}var _r="7.4.0";var Ia={bigint:"bigint",date:"datetime",decimal:"decimal",bytes:"bytes"};function Na(e){let t;try{t=JSON.parse(e)}catch(i){throw new Error(`Received invalid serialized parameters: ${i.message}`)}if(!Array.isArray(t))throw new Error("Received invalid serialized parameters: expected an array");let r=t.map(i=>Da(i)),n=t.map(i=>Jd(i));return{args:r,argTypes:n}}function Da(e){if(Array.isArray(e))return e.map(t=>Da(t));if(typeof e=="object"&&e!==null&&"prisma__value"in e){if(!("prisma__type"in e))throw new Error("Invalid serialized parameter, prisma__type should be present when prisma__value is present");return`${e.prisma__value}`}return typeof e=="object"&&e!==null?JSON.stringify(e):e}function Jd(e){return Array.isArray(e)?{scalarType:e.length>0?Oa(e[0]):"unknown",arity:"list"}:{scalarType:Oa(e),arity:"scalar"}}function Oa(e){return typeof e=="object"&&e!==null&&"prisma__type"in e&&typeof e.prisma__type=="string"&&e.prisma__type in Ia?Ia[e.prisma__type]:typeof e=="number"?"decimal":typeof e=="string"?"string":"unknown"}function Fa(e,t){return{batch:e,transaction:t?.kind==="batch"?{isolationLevel:t.options.isolationLevel}:void 0}}function Ma(e){return e?e.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,t=>`${t[0]}5`):""}function _a(e){return e.split(`
`).map(t=>t.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var La=U(Ui());function $a({title:e,user:t="prisma",repo:r="prisma",template:n="bug_report.yml",body:i}){return(0,La.default)({user:t,repo:r,template:n,title:e,body:i})}function Va({version:e,binaryTarget:t,title:r,description:n,engineVersion:i,database:o,query:s}){let a=Ii(6e3-(s?.length??0)),l=_a(Oe(a)),u=n?`# Description
\`\`\`
${n}
\`\`\``:"",c=Oe(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${t?.padEnd(19)}|
| Prisma Client   | ${e?.padEnd(19)}|
| Query Engine    | ${i?.padEnd(19)}|
| Database        | ${o?.padEnd(19)}|

${u}

## Logs
\`\`\`
${l}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${s?Ma(s):""}
\`\`\`
`),p=$a({title:r,body:c});return`${r}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${it(p)}

If you want the Prisma team to look into it, please open the link above \u{1F64F}
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}var Lr=class e{#e;#t;#r;#n;#i;constructor(t,r,n){this.#e=t,this.#t=r,this.#r=n,this.#n=r.getConnectionInfo?.(),this.#i=_t.forSql({onQuery:this.#e.onQuery,tracingHelper:this.#e.tracingHelper,provider:this.#e.provider,connectionInfo:this.#n})}static async connect(t){let r,n;try{r=await t.driverAdapterFactory.connect(),n=new $t({driverAdapter:r,transactionOptions:t.transactionOptions,tracingHelper:t.tracingHelper,onQuery:t.onQuery,provider:t.provider})}catch(i){throw await r?.dispose(),i}return new e(t,r,n)}getConnectionInfo(){let t=this.#n??{supportsRelationJoins:!1};return Promise.resolve({provider:this.#t.provider,connectionInfo:t})}async execute({plan:t,placeholderValues:r,transaction:n,batchIndex:i,queryInfo:o}){let s=n?await this.#r.getTransaction(n,i!==void 0?"batch query":"query"):this.#t;return await this.#i.run(t,{queryable:s,transactionManager:n?{enabled:!1}:{enabled:!0,manager:this.#r},scope:r,sqlCommenter:this.#e.sqlCommenters&&{plugins:this.#e.sqlCommenters,queryInfo:o}})}async startTransaction(t){return{...await this.#r.startTransaction(t),payload:void 0}}async commitTransaction(t){await this.#r.commitTransaction(t.id)}async rollbackTransaction(t){await this.#r.rollbackTransaction(t.id)}async disconnect(){try{await this.#r.cancelAllTransactions()}finally{await this.#t.dispose()}}apiKey(){return null}};var Hd=new Set(["DateTime","Decimal","BigInt","Bytes","Json","Raw"]);function $r(e){if(e==null)return{kind:"null"};if(typeof e=="string")return{kind:"primitive",value:e};if(typeof e=="number")return{kind:"primitive",value:e};if(typeof e=="boolean")return{kind:"primitive",value:e};if(Array.isArray(e))return{kind:"array",items:e};if(typeof e=="object"){let t=e;if("$type"in t&&typeof t.$type=="string"){let r=t.$type;return Hd.has(r)?{kind:"taggedScalar",tag:r,value:t.value}:{kind:"structural",value:t.value}}return{kind:"object",entries:t}}return{kind:"structural",value:e}}function qa(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!("$type"in e)}function ja(e){return typeof e=="object"&&e!==null&&"$type"in e&&typeof e.$type=="string"}function Ba(e,t){let r=new Vr(t),n=e.modelName?`${e.modelName}.${e.action}`:e.action,i=t.root(n);return{parameterizedQuery:{...e,query:r.parameterizeFieldSelection(e.query,i?.argsNodeId,i?.outputNodeId)},placeholderValues:r.getPlaceholderValues()}}function Qa(e,t){let r=new Vr(t),n=[];for(let i=0;i<e.batch.length;i++){let o=e.batch[i],s=o.modelName?`${o.modelName}.${o.action}`:o.action,a=t.root(s);n.push({...o,query:r.parameterizeFieldSelection(o.query,a?.argsNodeId,a?.outputNodeId)})}return{parameterizedBatch:{...e,batch:n},placeholderValues:r.getPlaceholderValues()}}var Vr=class{#e;#t=new Map;#r=new Map;#n=1;constructor(t){this.#e=t}getPlaceholderValues(){return Object.fromEntries(this.#t)}#i(t,r){let n=zd(t,r),i=this.#r.get(n);if(i!==void 0)return Ua(i,r);let o=`%${this.#n++}`;return this.#r.set(n,o),this.#t.set(o,t),Ua(o,r)}parameterizeFieldSelection(t,r,n){let i=this.#e.inputNode(r),o=this.#e.outputNode(n),s={...t};return t.arguments&&t.arguments.$type!=="Raw"&&(s.arguments=this.#o(t.arguments,i)),t.selection&&(s.selection=this.#c(t.selection,o)),s}#o(t,r){if(!r)return t;let n={};for(let[i,o]of Object.entries(t)){let s=this.#e.inputEdge(r,i);s?n[i]=this.#a(o,s):n[i]=o}return n}#a(t,r){let n=$r(t);switch(n.kind){case"null":return t;case"structural":return t;case"primitive":return this.#s(n.value,r);case"taggedScalar":return this.#u(t,n.tag,r);case"array":return this.#l(n.items,t,r);case"object":return this.#p(n.entries,r);default:throw new Error(`Unknown value kind ${n.kind}`)}}#s(t,r){if(te(r,ee.ParamEnum)&&r.enumNameIndex!==void 0&&typeof t=="string"&&this.#e.enumValues(r)?.includes(t)){let s={type:"Enum"};return this.#i(t,s)}if(!te(r,ee.ParamScalar))return t;let n=he(r);if(n===0)return t;let i=ii(t);return Ha(i,n)?(n&N.Json&&(t=JSON.stringify(t)),this.#i(t,i)):t}#u(t,r,n){if(!te(n,ee.ParamScalar))return t;let i=he(n);if(i===0||!za(r,i))return t;let o=Ga(t.$type),s=Wa(t);return this.#i(s,o)}#l(t,r,n){if(te(n,ee.ParamScalar)&&he(n)&N.Json){let i=JSON.stringify(t),o={type:"Json"};return this.#i(i,o)}if(te(n,ee.ParamEnum)){let i=this.#e.enumValues(n);if(i&&t.every(o=>typeof o=="string"&&i.includes(o))){let o={type:"List",inner:{type:"Enum"}};return this.#i(t,o)}}if(te(n,ee.ParamListScalar)&&t.every(o=>Xd(o,n))&&t.length>0){let o=t.map(l=>em(l)),a={type:"List",inner:Zd(t)};return this.#i(o,a)}if(te(n,ee.ListObject)){let i=this.#e.inputNode(n.childNodeId);if(i)return t.map(o=>qa(o)?this.#o(o,i):o)}return r}#p(t,r){if(te(r,ee.Object)){let i=this.#e.inputNode(r.childNodeId);if(i)return this.#o(t,i)}if(he(r)&N.Json){let i=JSON.stringify(t),o={type:"Json"};return this.#i(i,o)}return t}#c(t,r){if(!t||!r)return t;let n={};for(let[i,o]of Object.entries(t)){if(i==="$scalars"||i==="$composites"||typeof o=="boolean"){n[i]=o;continue}let s=this.#e.outputEdge(r,i);if(s){let a=o,l=this.#e.inputNode(s.argsNodeId),u=this.#e.outputNode(s.outputNodeId),c={selection:a.selection?this.#c(a.selection,u):{}};a.arguments&&(c.arguments=this.#o(a.arguments,l)),n[i]=c}else n[i]=o}return n}};function Ua(e,t){return{$type:"Param",value:{name:e,...t}}}function Ja(e){return e.type==="List"?`List<${Ja(e.inner)}>`:e.type}function Gd(e){return ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"):JSON.stringify(e)}function zd(e,t){let r=Ja(t),n=Gd(e);return`${r}:${n}`}var Wd=2**31-1,Kd=-(2**31);function ii(e){switch(typeof e){case"boolean":return{type:"Boolean"};case"number":return Number.isInteger(e)?Kd<=e&&e<=Wd?{type:"Int"}:{type:"BigInt"}:{type:"Float"};case"string":return{type:"String"};default:throw new Error("unreachable")}}function Ha({type:e},t){switch(e){case"Boolean":return(t&N.Boolean)!==0;case"Int":return(t&(N.Int|N.BigInt|N.Float))!==0;case"BigInt":return(t&N.BigInt)!==0;case"Float":return(t&N.Float)!==0;case"String":return(t&N.String)!==0;default:return!1}}function Ga(e){switch(e){case"BigInt":case"Bytes":case"DateTime":case"Json":return{type:e};case"Decimal":return{type:"Float"};default:return}}function Zd(e){let t={type:"Any"};for(let r of e){let n=$r(r),i;switch(n.kind){case"primitive":i=ii(n.value);break;case"taggedScalar":i=Ga(n.tag)??{type:"Any"};break;default:return{type:"Any"}}t=Yd(t,i)}return t}function Yd(e,t){if(e.type==="Any")return t;if(t.type==="Any"||e.type===t.type)return e;let r={Int:0,BigInt:1,Float:2},n=r[e.type],i=r[t.type];return n!==void 0&&i!==void 0?n>=i?e:t:{type:"Any"}}function za(e,t){switch(e){case"DateTime":return(t&N.DateTime)!==0;case"Decimal":return(t&N.Decimal)!==0;case"BigInt":return(t&N.BigInt)!==0;case"Bytes":return(t&N.Bytes)!==0;case"Json":return(t&N.Json)!==0;default:return!1}}function Xd(e,t){let r=$r(e);switch(r.kind){case"structural":return!1;case"null":return!1;case"primitive":{let n=ii(r.value),i=he(t);return i!==0&&Ha(n,i)}case"taggedScalar":{let n=he(t);return n!==0&&za(r.tag,n)}default:return!1}}function em(e){return ja(e)?Wa(e):e}function Wa(e){return e.value}var qr=class{#e;#t;#r;constructor(t=1e3){this.#e=new Map,this.#t=new Map,this.#r=t}getSingle(t){let r=this.#e.get(t);return r&&(this.#e.delete(t),this.#e.set(t,r)),r}setSingle(t,r){if(this.#e.has(t)){this.#e.delete(t),this.#e.set(t,r);return}if(this.#e.size>=this.#r){let n=this.#e.keys().next().value;n!==void 0&&this.#e.delete(n)}this.#e.set(t,r)}getBatch(t){let r=this.#t.get(t);return r&&(this.#t.delete(t),this.#t.set(t,r)),r}setBatch(t,r){if(this.#t.has(t)){this.#t.delete(t),this.#t.set(t,r);return}if(this.#t.size>=this.#r){let n=this.#t.keys().next().value;n!==void 0&&this.#t.delete(n)}this.#t.set(t,r)}clear(){this.#e.clear(),this.#t.clear()}get size(){return this.#e.size+this.#t.size}get singleCacheSize(){return this.#e.size}get batchCacheSize(){return this.#t.size}};var tl=require("@prisma/client-runtime-utils");var jr=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function Ka(e,t,r){let n=r||{},i=n.encode||encodeURIComponent;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!jr.test(e))throw new TypeError("argument name is invalid");let o=i(t);if(o&&!jr.test(o))throw new TypeError("argument val is invalid");let s=e+"="+o;if(n.maxAge!==void 0&&n.maxAge!==null){let a=n.maxAge-0;if(Number.isNaN(a)||!Number.isFinite(a))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(a)}if(n.domain){if(!jr.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!jr.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if(!tm(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":{s+="; Priority=Low";break}case"medium":{s+="; Priority=Medium";break}case"high":{s+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:{s+="; SameSite=Strict";break}case"lax":{s+="; SameSite=Lax";break}case"strict":{s+="; SameSite=Strict";break}case"none":{s+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(s+="; Partitioned"),s}function tm(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function Za(e,t){let r=(e||"").split(";").filter(l=>typeof l=="string"&&!!l.trim()),n=r.shift()||"",i=rm(n),o=i.name,s=i.value;try{s=t?.decode===!1?s:(t?.decode||decodeURIComponent)(s)}catch{}let a={name:o,value:s};for(let l of r){let u=l.split("="),c=(u.shift()||"").trimStart().toLowerCase(),p=u.join("=");switch(c){case"expires":{a.expires=new Date(p);break}case"max-age":{a.maxAge=Number.parseInt(p,10);break}case"secure":{a.secure=!0;break}case"httponly":{a.httpOnly=!0;break}case"samesite":{a.sameSite=p;break}default:a[c]=p}}return a}function rm(e){let t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}var Ur=class extends Error{clientVersion;cause;constructor(t,r){super(t),this.clientVersion=r.clientVersion,this.cause=r.cause}get[Symbol.toStringTag](){return this.name}};var Br=class extends Ur{isRetryable;constructor(t,r){super(t,r),this.isRetryable=r.isRetryable??!0}};function Ya(e,t){return{...e,isRetryable:t}}var Ce=class extends Br{name="InvalidDatasourceError";code="P6001";constructor(t,r){super(t,Ya(r,!1))}};mt(Ce,"InvalidDatasourceError");function Xa(e){let t={clientVersion:e.clientVersion},r;try{r=new URL(e.accelerateUrl)}catch(l){let u=l.message;throw new Ce(`Error validating \`accelerateUrl\`, the URL cannot be parsed, reason: ${u}`,t)}let{protocol:n,searchParams:i}=r;if(n!=="prisma:"&&n!==Gt)throw new Ce("Error validating `accelerateUrl`: the URL must start with the protocol `prisma://` or `prisma+postgres://`",t);let o=i.get("api_key");if(o===null||o.length<1)throw new Ce("Error validating `accelerateUrl`: the URL must contain a valid API key",t);let s=rn(r)?"http:":"https:";process.env.TEST_CLIENT_ENGINE_REMOTE_EXECUTOR&&r.searchParams.has("use_http")&&(s="http:");let a=new URL(r.href.replace(n,s));return{apiKey:o,url:a}}var el=U(Di()),Qr=class{apiKey;tracingHelper;logLevel;logQueries;engineHash;constructor({apiKey:t,tracingHelper:r,logLevel:n,logQueries:i,engineHash:o}){this.apiKey=t,this.tracingHelper=r,this.logLevel=n,this.logQueries=i,this.engineHash=o}build({traceparent:t,transactionId:r}={}){let n={Accept:"application/json",Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","Prisma-Engine-Hash":this.engineHash,"Prisma-Engine-Version":el.enginesVersion};this.tracingHelper.isEnabled()&&(n.traceparent=t??this.tracingHelper.getTraceParent()),r&&(n["X-Transaction-Id"]=r);let i=this.#e();return i.length>0&&(n["X-Capture-Telemetry"]=i.join(", ")),n}#e(){let t=[];return this.tracingHelper.isEnabled()&&t.push("tracing"),this.logLevel&&t.push(this.logLevel),this.logQueries&&t.push("query"),t}};function nm(e){return e[0]*1e3+e[1]/1e6}function oi(e){return new Date(nm(e))}var rl=F("prisma:client:clientEngine:remoteExecutor"),Jr=class{#e;#t;#r;#n;#i;#o;constructor(t){this.#e=t.clientVersion,this.#n=t.logEmitter,this.#i=t.tracingHelper,this.#o=t.sqlCommenters;let{url:r,apiKey:n}=Xa({clientVersion:t.clientVersion,accelerateUrl:t.accelerateUrl});this.#r=new si(r),this.#t=new Qr({apiKey:n,engineHash:t.clientVersion,logLevel:t.logLevel,logQueries:t.logQueries,tracingHelper:t.tracingHelper})}async getConnectionInfo(){return await this.#a({path:"/connection-info",method:"GET"})}async execute({plan:t,placeholderValues:r,batchIndex:n,model:i,operation:o,transaction:s,customFetch:a,queryInfo:l}){let u=l&&this.#o?.length?br(this.#o,{query:l}):void 0;return(await this.#a({path:s?`/transaction/${s.id}/query`:"/query",method:"POST",body:{model:i,operation:o,plan:t,params:r,comments:u&&Object.keys(u).length>0?u:void 0},batchRequestIdx:n,fetch:a})).data}async startTransaction(t){return{...await this.#a({path:"/transaction/start",method:"POST",body:t}),payload:void 0}}async commitTransaction(t){await this.#a({path:`/transaction/${t.id}/commit`,method:"POST"})}async rollbackTransaction(t){await this.#a({path:`/transaction/${t.id}/rollback`,method:"POST"})}disconnect(){return Promise.resolve()}apiKey(){return this.#t.apiKey}async#a({path:t,method:r,body:n,fetch:i=globalThis.fetch,batchRequestIdx:o}){let s=await this.#r.request({method:r,path:t,headers:this.#t.build(),body:n,fetch:i});s.ok||await this.#s(s,o);let a=await s.json();return typeof a.extensions=="object"&&a.extensions!==null&&this.#u(a.extensions),a}async#s(t,r){let n=t.headers.get("Prisma-Error-Code"),i=await t.text(),o,s=i;try{o=JSON.parse(i)}catch{o={}}typeof o.code=="string"&&(n=o.code),typeof o.error=="string"?s=o.error:typeof o.message=="string"?s=o.message:typeof o.InvalidRequestError=="object"&&o.InvalidRequestError!==null&&typeof o.InvalidRequestError.reason=="string"&&(s=o.InvalidRequestError.reason),s=s||`HTTP ${t.status}: ${t.statusText}`;let a=typeof o.meta=="object"&&o.meta!==null?o.meta:o;throw new tl.PrismaClientKnownRequestError(s,{clientVersion:this.#e,code:n??"P6000",batchRequestIdx:r,meta:a})}#u(t){if(t.logs)for(let r of t.logs)this.#l(r);t.spans&&this.#i.dispatchEngineSpans(t.spans)}#l(t){switch(t.level){case"debug":case"trace":rl(t);break;case"error":case"warn":case"info":{this.#n.emit(t.level,{timestamp:oi(t.timestamp),message:t.attributes.message??"",target:t.target??"RemoteExecutor"});break}case"query":{this.#n.emit("query",{query:t.attributes.query??"",timestamp:oi(t.timestamp),duration:t.attributes.duration_ms??0,params:t.attributes.params??"",target:t.target??"RemoteExecutor"});break}default:throw new Error(`Unexpected log level: ${t.level}`)}}},si=class{#e;#t;#r;constructor(t){this.#e=t,this.#t=new Map}async request({method:t,path:r,headers:n,body:i,fetch:o}){let s=new URL(r,this.#e),a=this.#n(s);a&&(n.Cookie=a),this.#r&&(n["Accelerate-Query-Engine-Jwt"]=this.#r);let l=await o(s.href,{method:t,body:i!==void 0?JSON.stringify(i):void 0,headers:n});return rl(t,s,l.status,l.statusText),this.#r=l.headers.get("Accelerate-Query-Engine-Jwt")??void 0,this.#i(s,l),l}#n(t){let r=[],n=new Date;for(let[i,o]of this.#t){if(o.expires&&o.expires<n){this.#t.delete(i);continue}let s=o.domain??t.hostname,a=o.path??"/";t.hostname.endsWith(s)&&t.pathname.startsWith(a)&&r.push(Ka(o.name,o.value))}return r.length>0?r.join("; "):void 0}#i(t,r){let n=r.headers.getSetCookie?.()||[];if(n.length===0){let i=r.headers.get("Set-Cookie");i&&n.push(i)}for(let i of n){let o=Za(i),s=o.domain??t.hostname,a=o.path??"/",l=`${s}:${a}:${o.name}`;this.#t.set(l,{name:o.name,value:o.value,domain:s,path:a,expires:o.expires})}}};var li=require("@prisma/client-runtime-utils"),ai={},nl={async loadQueryCompiler(e){let{clientVersion:t,compilerWasm:r}=e;if(r===void 0)throw new li.PrismaClientInitializationError("WASM query compiler was unexpectedly `undefined`",t);let n;return e.activeProvider===void 0||ai[e.activeProvider]===void 0?(n=(async()=>{let i=await r.getRuntime(),o=await r.getQueryCompilerWasmModule();if(o==null)throw new li.PrismaClientInitializationError("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",t);let s={[r.importName]:i},a=new WebAssembly.Instance(o,s),l=a.exports.__wbindgen_start;return i.__wbg_set_wasm(a.exports),l(),i.QueryCompiler})(),e.activeProvider!==void 0&&(ai[e.activeProvider]=n)):n=ai[e.activeProvider],await n}};var im="P2038",ae=F("prisma:client:clientEngine"),al=globalThis;al.PRISMA_WASM_PANIC_REGISTRY={set_message(e){throw new D.PrismaClientRustPanicError(e,_r)}};var qt=class{name="ClientEngine";#e;#t={type:"disconnected"};#r;#n;#i;#o;config;datamodel;logEmitter;logQueries;logLevel;tracingHelper;#a;constructor(t,r){if(t.accelerateUrl!==void 0)this.#n={remote:!0,accelerateUrl:t.accelerateUrl};else if(t.adapter)this.#n={remote:!1,driverAdapterFactory:t.adapter},ae("Using driver adapter: %O",t.adapter);else throw new D.PrismaClientInitializationError("Missing configured driver adapter. Engine type `client` requires an active driver adapter. Please check your PrismaClient initialization code.",t.clientVersion,im);this.#r=r??nl,this.config=t,this.logQueries=t.logQueries??!1,this.logLevel=t.logLevel??"error",this.logEmitter=t.logEmitter,this.datamodel=t.inlineSchema,this.tracingHelper=t.tracingHelper,this.#i=new qr,this.#o=Vt.deserialize(t.parameterizationSchema,n=>{if(Object.hasOwn(t.runtimeDataModel.enums,n))return t.runtimeDataModel.enums[n].values.map(i=>i.name)}),t.enableDebugLogs&&(this.logLevel="debug"),this.logQueries&&(this.#a=n=>{this.logEmitter.emit("query",{...n,params:vt(n.params),target:"ClientEngine"})})}async#s(){switch(this.#t.type){case"disconnected":{let t=this.tracingHelper.runInChildSpan("connect",async()=>{let r,n;try{r=await this.#u(),n=await this.#l(r)}catch(o){throw this.#t={type:"disconnected"},n?.free(),await r?.disconnect(),o}let i={executor:r,queryCompiler:n};return this.#t={type:"connected",engine:i},i});return this.#t={type:"connecting",promise:t},await t}case"connecting":return await this.#t.promise;case"connected":return this.#t.engine;case"disconnecting":return await this.#t.promise,await this.#s()}}async#u(){return this.#n.remote?new Jr({clientVersion:this.config.clientVersion,accelerateUrl:this.#n.accelerateUrl,logEmitter:this.logEmitter,logLevel:this.logLevel,logQueries:this.logQueries,tracingHelper:this.tracingHelper,sqlCommenters:this.config.sqlCommenters}):await Lr.connect({driverAdapterFactory:this.#n.driverAdapterFactory,tracingHelper:this.tracingHelper,transactionOptions:{...this.config.transactionOptions,isolationLevel:this.#g(this.config.transactionOptions.isolationLevel)},onQuery:this.#a,provider:this.config.activeProvider,sqlCommenters:this.config.sqlCommenters})}async#l(t){let r=this.#e;r===void 0&&(r=await this.#r.loadQueryCompiler(this.config),this.#e=r);let{provider:n,connectionInfo:i}=await t.getConnectionInfo();try{return this.#m(()=>new r({datamodel:this.datamodel,provider:n,connectionInfo:i}),void 0,!1)}catch(o){throw this.#p(o)}}#p(t){if(t instanceof D.PrismaClientRustPanicError)return t;try{let r=JSON.parse(t.message);return new D.PrismaClientInitializationError(r.message,this.config.clientVersion,r.error_code)}catch{return t}}#c(t,r){if(t instanceof D.PrismaClientInitializationError)return t;if(t.code==="GenericFailure"&&t.message?.startsWith("PANIC:"))return new D.PrismaClientRustPanicError(il(this,t.message,r),this.config.clientVersion);if(t instanceof I)return new D.PrismaClientKnownRequestError(t.message,{code:t.code,meta:t.meta,clientVersion:this.config.clientVersion});try{let n=JSON.parse(t);return new D.PrismaClientUnknownRequestError(`${n.message}
${n.backtrace}`,{clientVersion:this.config.clientVersion})}catch{return t}}#d(t){return t instanceof D.PrismaClientRustPanicError?t:typeof t.message=="string"&&typeof t.code=="string"?new D.PrismaClientKnownRequestError(t.message,{code:t.code,meta:t.meta,clientVersion:this.config.clientVersion}):typeof t.message=="string"?new D.PrismaClientUnknownRequestError(t.message,{clientVersion:this.config.clientVersion}):t}#m(t,r,n=!0){let i=al.PRISMA_WASM_PANIC_REGISTRY.set_message,o;global.PRISMA_WASM_PANIC_REGISTRY.set_message=s=>{o=s};try{return t()}finally{if(global.PRISMA_WASM_PANIC_REGISTRY.set_message=i,o)throw this.#e=void 0,n&&this.stop().catch(s=>ae("failed to disconnect:",s)),new D.PrismaClientRustPanicError(il(this,o,r),this.config.clientVersion)}}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the client engine, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){await this.#s()}async stop(){switch(this.#t.type){case"disconnected":return;case"connecting":return await this.#t.promise,await this.stop();case"connected":{let t=this.#t.engine,r=this.tracingHelper.runInChildSpan("disconnect",async()=>{try{await t.executor.disconnect(),t.queryCompiler.free()}finally{this.#t={type:"disconnected"}}});return this.#t={type:"disconnecting",promise:r},await r}case"disconnecting":return await this.#t.promise}}version(){return"unknown"}async transaction(t,r,n){let i,{executor:o}=await this.#s();try{if(t==="start"){let s=n;i=await o.startTransaction({...s,isolationLevel:this.#g(s.isolationLevel)})}else if(t==="commit"){let s=n;await o.commitTransaction(s)}else if(t==="rollback"){let s=n;await o.rollbackTransaction(s)}else ie(t,"Invalid transaction action.")}catch(s){throw this.#c(s)}return i?{id:i.id,payload:void 0}:void 0}async request(t,{interactiveTransaction:r,customDataProxyFetch:n}){ae("sending request");let{executor:i,queryCompiler:o}=await this.#s().catch(l=>{throw this.#c(l,JSON.stringify(t))}),s,a={};if(ol(t))s=sl(t);else{let{parameterizedQuery:l,placeholderValues:u}=Ba(t,this.#o),c=JSON.stringify(l);a=u;let p=this.#i.getSingle(c);p?(ae("query plan cache hit"),s=p):(ae("query plan cache miss"),s=this.#h(l,c,o),this.#i.setSingle(c,s))}try{ae("query plan created",s);let l=await i.execute({plan:s,model:t.modelName,operation:t.action,placeholderValues:a,transaction:r,batchIndex:void 0,customFetch:n?.(globalThis.fetch),queryInfo:{type:"single",modelName:t.modelName,action:t.action,query:t.query}});return ae("query plan executed"),{data:{[t.action]:l}}}catch(l){throw this.#c(l,JSON.stringify(t))}}async requestBatch(t,{transaction:r,customDataProxyFetch:n}){if(t.length===0)return[];let i=t[0].action,o=t[0].modelName,s=Fa(t,r),a=JSON.stringify(s),{executor:l,queryCompiler:u}=await this.#s().catch(f=>{throw this.#c(f,a)}),c=o===void 0,p,d={};if(c)p=this.#f(t,a,u);else{let{parameterizedBatch:f,placeholderValues:h}=Qa(s,this.#o),x=JSON.stringify(f);d=h;let E=this.#i.getBatch(x);if(E)ae("batch query plan cache hit"),p=E;else{ae("batch query plan cache miss");try{p=this.#f(f.batch,x,u),this.#i.setBatch(x,p)}catch(L){throw this.#d(L)}}}try{let f;switch(r?.kind==="itx"&&(f=r.options),p.type){case"multi":{if(r?.kind!=="itx"){let E=r?.options.isolationLevel?{...this.config.transactionOptions,isolationLevel:r.options.isolationLevel}:this.config.transactionOptions;f=await this.transaction("start",{},E)}let h=[],x=!1;for(let[E,L]of p.plans.entries())try{let T=await l.execute({plan:L,placeholderValues:d,model:t[E].modelName,operation:t[E].action,batchIndex:E,transaction:f,customFetch:n?.(globalThis.fetch),queryInfo:{type:"single",...t[E]}});h.push({data:{[t[E].action]:T}})}catch(T){h.push(T),x=!0;break}return f!==void 0&&r?.kind!=="itx"&&(x?await this.transaction("rollback",{},f):await this.transaction("commit",{},f)),h}case"compacted":{if(!t.every(E=>E.action===i&&E.modelName===o)){let E=t.map(T=>T.action).join(", "),L=t.map(T=>T.modelName).join(", ");throw new Error(`Internal error: All queries in a compacted batch must have the same action and model name, but received actions: [${E}] and model names: [${L}]. This indicates a bug in the client. Please report this issue to the Prisma team with your query details.`)}if(o===void 0)throw new Error("Internal error: A compacted batch cannot contain raw queries. This indicates a bug in the client. Please report this issue to the Prisma team with your query details.");let h=await l.execute({plan:p.plan,placeholderValues:d,model:o,operation:i,batchIndex:void 0,transaction:f,customFetch:n?.(globalThis.fetch),queryInfo:{type:"compacted",action:i,modelName:o,queries:t}});return as(h,p,d).map(E=>({data:{[i]:E}}))}}}catch(f){throw this.#c(f,a)}}async apiKey(){let{executor:t}=await this.#s();return t.apiKey()}#h(t,r,n){try{return this.#m(()=>this.#y({queries:[t],execute:()=>n.compile(r)}))}catch(i){throw this.#d(i)}}#f(t,r,n){if(t.every(ol))return{type:"multi",plans:t.map(i=>sl(i))};try{return this.#m(()=>this.#y({queries:t,execute:()=>n.compileBatch(r)}))}catch(i){throw this.#d(i)}}#g(t){switch(t){case void 0:return;case"ReadUncommitted":return"READ UNCOMMITTED";case"ReadCommitted":return"READ COMMITTED";case"RepeatableRead":return"REPEATABLE READ";case"Serializable":return"SERIALIZABLE";case"Snapshot":return"SNAPSHOT";default:throw new D.PrismaClientKnownRequestError(`Inconsistent column data: Conversion failed: Invalid isolation level \`${t}\``,{code:"P2023",clientVersion:this.config.clientVersion,meta:{providedIsolationLevel:t}})}}#y({queries:t,execute:r}){return this.tracingHelper.runInChildSpan({name:"compile",attributes:{models:t.map(n=>n.modelName).filter(n=>n!==void 0),actions:t.map(n=>n.action)}},r)}};function il(e,t,r){return Va({binaryTarget:void 0,title:t,version:e.config.clientVersion,engineVersion:"unknown",database:e.config.activeProvider,query:r})}function ol(e){return e.action==="queryRaw"||e.action==="executeRaw"}function sl(e){let t=e.query.arguments.query,{args:r,argTypes:n}=Na(e.query.arguments.parameters);return{type:e.action==="queryRaw"?"query":"execute",args:{type:"rawSql",sql:t,args:r,argTypes:n}}}function ll(e){return new qt(e)}var ul=e=>({command:e});var hl=require("@prisma/client-runtime-utils");var cl=e=>e.strings.reduce((t,r,n)=>`${t}@P${n}${r}`);var ml=require("@prisma/client-runtime-utils");function et(e){try{return pl(e,"fast")}catch{return pl(e,"slow")}}function pl(e,t){return JSON.stringify(e.map(r=>fl(r,t)))}function fl(e,t){if(Array.isArray(e))return e.map(r=>fl(r,t));if(typeof e=="bigint")return{prisma__type:"bigint",prisma__value:e.toString()};if(Ne(e))return{prisma__type:"date",prisma__value:e.toJSON()};if(ml.Decimal.isDecimal(e))return{prisma__type:"decimal",prisma__value:e.toJSON()};if(Buffer.isBuffer(e))return{prisma__type:"bytes",prisma__value:e.toString("base64")};if(om(e))return{prisma__type:"bytes",prisma__value:Buffer.from(e).toString("base64")};if(ArrayBuffer.isView(e)){let{buffer:r,byteOffset:n,byteLength:i}=e;return{prisma__type:"bytes",prisma__value:Buffer.from(r,n,i).toString("base64")}}return typeof e=="object"&&t==="slow"?gl(e):e}function om(e){return e instanceof ArrayBuffer||e instanceof SharedArrayBuffer?!0:typeof e=="object"&&e!==null?e[Symbol.toStringTag]==="ArrayBuffer"||e[Symbol.toStringTag]==="SharedArrayBuffer":!1}function gl(e){if(typeof e!="object"||e===null)return e;if(typeof e.toJSON=="function")return e.toJSON();if(Array.isArray(e))return e.map(dl);let t={};for(let r of Object.keys(e))t[r]=dl(e[r]);return t}function dl(e){return typeof e=="bigint"?e.toString():gl(e)}var sm=/^(\s*alter\s)/i,yl=F("prisma:client");function ui(e,t,r,n){if(!(e!=="postgresql"&&e!=="cockroachdb")&&r.length>0&&sm.exec(t))throw new Error(`Running ALTER using ${n} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var ci=({clientMethod:e,activeProvider:t})=>r=>{let n="",i;if(mr(r))n=r.sql,i={values:et(r.values),__prismaRawParameters__:!0};else if(Array.isArray(r)){let[o,...s]=r;n=o,i={values:et(s||[]),__prismaRawParameters__:!0}}else switch(t){case"sqlite":case"mysql":{n=r.sql,i={values:et(r.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{n=r.text,i={values:et(r.values),__prismaRawParameters__:!0};break}case"sqlserver":{n=cl(r),i={values:et(r.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${t} provider does not support ${e}`)}return i?.values?yl(`prisma.${e}(${n}, ${i.values})`):yl(`prisma.${e}(${n})`),{query:n,parameters:i}},wl={requestArgsToMiddlewareArgs(e){return[e.strings,...e.values]},middlewareArgsToRequestArgs(e){let[t,...r]=e;return new hl.Sql(t,r)}},bl={requestArgsToMiddlewareArgs(e){return[e]},middlewareArgsToRequestArgs(e){return e[0]}};function pi(e){return function(r,n){let i,o=(s=e)=>{try{return s===void 0||s?.kind==="itx"?i??=xl(r(s)):xl(r(s))}catch(a){return Promise.reject(a)}};return{get spec(){return n},then(s,a){return o().then(s,a)},catch(s){return o().catch(s)},finally(s){return o().finally(s)},requestTransaction(s){let a=o(s);return a.requestTransaction?a.requestTransaction(s):a},[Symbol.toStringTag]:"PrismaPromise"}}}function xl(e){return typeof e.then=="function"?e:Promise.resolve(e)}var El={name:"@prisma/instrumentation-contract",version:"7.4.0",description:"Shared types and utilities for Prisma instrumentation",main:"dist/index.js",module:"dist/index.mjs",types:"dist/index.d.ts",exports:{".":{require:{types:"./dist/index.d.ts",default:"./dist/index.js"},import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"}}},license:"Apache-2.0",homepage:"https://www.prisma.io",repository:{type:"git",url:"https://github.com/prisma/prisma.git",directory:"packages/instrumentation-contract"},bugs:"https://github.com/prisma/prisma/issues",scripts:{dev:"DEV=true tsx helpers/build.ts",build:"tsx helpers/build.ts",prepublishOnly:"pnpm run build",test:"vitest run"},files:["dist"],sideEffects:!1,devDependencies:{"@opentelemetry/api":"1.9.0"},peerDependencies:{"@opentelemetry/api":"^1.8"}};var lm=El.version.split(".")[0],um="PRISMA_INSTRUMENTATION",cm=`V${lm}_PRISMA_INSTRUMENTATION`,Pl=globalThis;function Tl(){let e=Pl[cm];return e?.helper?e.helper:Pl[um]?.helper}var pm={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(e,t){return t()}},di=class{isEnabled(){return this.getTracingHelper().isEnabled()}getTraceParent(t){return this.getTracingHelper().getTraceParent(t)}dispatchEngineSpans(t){return this.getTracingHelper().dispatchEngineSpans(t)}getActiveContext(){return this.getTracingHelper().getActiveContext()}runInChildSpan(t,r){return this.getTracingHelper().runInChildSpan(t,r)}getTracingHelper(){return Tl()??pm}};function Sl(){return new di}function Al(e,t=()=>{}){let r,n=new Promise(i=>r=i);return{then(i){return--e===0&&r(t()),i?.(n)}}}function vl(e){return typeof e=="string"?e:e.reduce((t,r)=>{let n=typeof r=="string"?r:r.level;return n==="query"?t:t&&(r==="info"||t==="info")?"info":n},void 0)}var kl=require("@prisma/client-runtime-utils");function Cl(e){if(e.action!=="findUnique"&&e.action!=="findUniqueOrThrow")return;let t=[];return e.modelName&&t.push(e.modelName),e.query.arguments&&t.push(mi(e.query.arguments)),t.push(mi(e.query.selection)),t.join("")}function mi(e){return`(${Object.keys(e).sort().map(r=>{let n=e[r];return typeof n=="object"&&n!==null?`(${r} ${mi(n)})`:r}).join(" ")})`}var dm={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function fi(e){return dm[e]}var Hr=class{constructor(t){this.options=t;this.batches={}}batches;tickActive=!1;request(t){let r=this.options.batchBy(t);return r?(this.batches[r]||(this.batches[r]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((n,i)=>{this.batches[r].push({request:t,resolve:n,reject:i})})):this.options.singleLoader(t)}dispatchBatches(){for(let t in this.batches){let r=this.batches[t];delete this.batches[t],r.length===1?this.options.singleLoader(r[0].request).then(n=>{n instanceof Error?r[0].reject(n):r[0].resolve(n)}).catch(n=>{r[0].reject(n)}):(r.sort((n,i)=>this.options.batchOrder(n.request,i.request)),this.options.batchLoader(r.map(n=>n.request)).then(n=>{if(n instanceof Error)for(let i=0;i<r.length;i++)r[i].reject(n);else for(let i=0;i<r.length;i++){let o=n[i];o instanceof Error?r[i].reject(o):r[i].resolve(o)}}).catch(n=>{for(let i=0;i<r.length;i++)r[i].reject(n)}))}}get[Symbol.toStringTag](){return"DataLoader"}};var Rl=require("@prisma/client-runtime-utils");function Re(e,t){if(t===null)return t;switch(e){case"bigint":return BigInt(t);case"bytes":{let{buffer:r,byteOffset:n,byteLength:i}=Buffer.from(t,"base64");return new Uint8Array(r,n,i)}case"decimal":return new Rl.Decimal(t);case"datetime":case"date":return new Date(t);case"time":return new Date(`1970-01-01T${t}Z`);case"bigint-array":return t.map(r=>Re("bigint",r));case"bytes-array":return t.map(r=>Re("bytes",r));case"decimal-array":return t.map(r=>Re("decimal",r));case"datetime-array":return t.map(r=>Re("datetime",r));case"date-array":return t.map(r=>Re("date",r));case"time-array":return t.map(r=>Re("time",r));default:return t}}function Gr(e){let t=[],r=mm(e);for(let n=0;n<e.rows.length;n++){let i=e.rows[n],o={...r};for(let s=0;s<i.length;s++)o[e.columns[s]]=Re(e.types[s],i[s]);t.push(o)}return t}function mm(e){let t={};for(let r=0;r<e.columns.length;r++)t[e.columns[r]]=null;return t}var fm=F("prisma:client:request_handler"),zr=class{client;dataloader;logEmitter;constructor(t,r){this.logEmitter=r,this.client=t,this.dataloader=new Hr({batchLoader:Zo(async({requests:n,customDataProxyFetch:i})=>{let{transaction:o,otelParentCtx:s}=n[0],a=n.map(p=>p.protocolQuery),l=this.client._tracingHelper.getTraceParent(s),u=n.some(p=>fi(p.protocolQuery.action));return(await this.client._engine.requestBatch(a,{traceparent:l,transaction:gm(o),containsWrite:u,customDataProxyFetch:i})).map((p,d)=>{if(p instanceof Error)return p;try{return this.mapQueryEngineResult(n[d],p)}catch(f){return f}})}),singleLoader:async n=>{let i=n.transaction?.kind==="itx"?Il(n.transaction):void 0,o=await this.client._engine.request(n.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:i,isWrite:fi(n.protocolQuery.action),customDataProxyFetch:n.customDataProxyFetch});return this.mapQueryEngineResult(n,o)},batchBy:n=>n.transaction?.id?`transaction-${n.transaction.id}`:Cl(n.protocolQuery),batchOrder(n,i){return n.transaction?.kind==="batch"&&i.transaction?.kind==="batch"?n.transaction.index-i.transaction.index:0}})}async request(t){try{return await this.dataloader.request(t)}catch(r){let{clientMethod:n,callsite:i,transaction:o,args:s,modelName:a}=t;this.handleAndLogRequestError({error:r,clientMethod:n,callsite:i,transaction:o,args:s,modelName:a,globalOmit:t.globalOmit})}}mapQueryEngineResult({dataPath:t,unpacker:r},n){let i=n?.data,o=this.unpack(i,t,r);return process.env.PRISMA_CLIENT_GET_TIME?{data:o}:o}handleAndLogRequestError(t){try{this.handleRequestError(t)}catch(r){throw this.logEmitter&&this.logEmitter.emit("error",{message:r.message,target:t.clientMethod,timestamp:new Date}),r}}handleRequestError({error:t,clientMethod:r,callsite:n,transaction:i,args:o,modelName:s,globalOmit:a}){if(fm(t),ym(t,i))throw t;if(t instanceof w.PrismaClientKnownRequestError&&hm(t)){let u=Ol(t.meta);ar({args:o,errors:[u],callsite:n,errorFormat:this.client._errorFormat,originalMethod:r,clientVersion:this.client._clientVersion,globalOmit:a})}let l=t.message;if(n&&(l=Xt({callsite:n,originalMethod:r,isPanic:t.isPanic,showColors:this.client._errorFormat==="pretty",message:l})),l=this.sanitizeMessage(l),t.code){let u=s?{modelName:s,...t.meta}:t.meta;throw new w.PrismaClientKnownRequestError(l,{code:t.code,clientVersion:this.client._clientVersion,meta:u,batchRequestIdx:t.batchRequestIdx})}else{if(t.isPanic)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion);if(t instanceof w.PrismaClientUnknownRequestError)throw new w.PrismaClientUnknownRequestError(l,{clientVersion:this.client._clientVersion,batchRequestIdx:t.batchRequestIdx});if(t instanceof w.PrismaClientInitializationError)throw new w.PrismaClientInitializationError(l,this.client._clientVersion);if(t instanceof w.PrismaClientRustPanicError)throw new w.PrismaClientRustPanicError(l,this.client._clientVersion)}throw t.clientVersion=this.client._clientVersion,t}sanitizeMessage(t){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?Oe(t):t}unpack(t,r,n){if(!t||(t.data&&(t=t.data),!t))return t;let i=Object.keys(t)[0],o=Object.values(t)[0],s=r.filter(u=>u!=="select"&&u!=="include"),a=bn(o,s),l=i==="queryRaw"?Gr(a):me(a);return n?n(l):l}get[Symbol.toStringTag](){return"RequestHandler"}};function gm(e){if(e){if(e.kind==="batch")return{kind:"batch",options:{isolationLevel:e.isolationLevel}};if(e.kind==="itx")return{kind:"itx",options:Il(e)};ie(e,"Unknown transaction kind")}}function Il(e){return{id:e.id,payload:e.payload}}function ym(e,t){return(0,kl.hasBatchIndex)(e)&&t?.kind==="batch"&&e.batchRequestIdx!==t.index}function hm(e){return e.code==="P2009"||e.code==="P2012"}function Ol(e){if(e.kind==="Union")return{kind:"Union",errors:e.errors.map(Ol)};if(Array.isArray(e.selectionPath)){let[,...t]=e.selectionPath;return{...e,selectionPath:t}}return e}var gi=_r;var _l=U(cn());var R=class extends Error{constructor(t){super(t+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};mt(R,"PrismaClientConstructorValidationError");var Nl=["errorFormat","adapter","accelerateUrl","log","transactionOptions","omit","comments","__internal"],Dl=["pretty","colorless","minimal"],Fl=["info","query","warn","error"],wm={adapter:()=>{},accelerateUrl:e=>{if(e!==void 0){if(typeof e!="string")throw new R(`Invalid value ${JSON.stringify(e)} for "accelerateUrl" provided to PrismaClient constructor.`);if(e.trim().length===0)throw new R('"accelerateUrl" provided to PrismaClient constructor must be a non-empty string.')}},errorFormat:e=>{if(e){if(typeof e!="string")throw new R(`Invalid value ${JSON.stringify(e)} for "errorFormat" provided to PrismaClient constructor.`);if(!Dl.includes(e)){let t=jt(e,Dl);throw new R(`Invalid errorFormat ${e} provided to PrismaClient constructor.${t}`)}}},log:e=>{if(!e)return;if(!Array.isArray(e))throw new R(`Invalid value ${JSON.stringify(e)} for "log" provided to PrismaClient constructor.`);function t(r){if(typeof r=="string"&&!Fl.includes(r)){let n=jt(r,Fl);throw new R(`Invalid log level "${r}" provided to PrismaClient constructor.${n}`)}}for(let r of e){t(r);let n={level:t,emit:i=>{let o=["stdout","event"];if(!o.includes(i)){let s=jt(i,o);throw new R(`Invalid value ${JSON.stringify(i)} for "emit" in logLevel provided to PrismaClient constructor.${s}`)}}};if(r&&typeof r=="object")for(let[i,o]of Object.entries(r))if(n[i])n[i](o);else throw new R(`Invalid property ${i} for "log" provided to PrismaClient constructor`)}},transactionOptions:e=>{if(!e)return;let t=e.maxWait;if(t!=null&&t<=0)throw new R(`Invalid value ${t} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let r=e.timeout;if(r!=null&&r<=0)throw new R(`Invalid value ${r} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(e,t)=>{if(typeof e!="object")throw new R('"omit" option is expected to be an object.');if(e===null)throw new R('"omit" option can not be `null`');let r=[];for(let[n,i]of Object.entries(e)){let o=Em(n,t.runtimeDataModel);if(!o){r.push({kind:"UnknownModel",modelKey:n});continue}for(let[s,a]of Object.entries(i)){let l=o.fields.find(u=>u.name===s);if(!l){r.push({kind:"UnknownField",modelKey:n,fieldName:s});continue}if(l.relationName){r.push({kind:"RelationInOmit",modelKey:n,fieldName:s});continue}typeof a!="boolean"&&r.push({kind:"InvalidFieldValue",modelKey:n,fieldName:s})}}if(r.length>0)throw new R(Pm(e,r))},comments:e=>{if(e!==void 0){if(!Array.isArray(e))throw new R(`Invalid value ${JSON.stringify(e)} for "comments" provided to PrismaClient constructor. Expected an array of SQL commenter plugins.`);for(let t=0;t<e.length;t++)if(typeof e[t]!="function")throw new R(`Invalid value at index ${t} for "comments" provided to PrismaClient constructor. Each plugin must be a function.`)}},__internal:e=>{if(!e)return;let t=["debug","engine","configOverride"];if(typeof e!="object")throw new R(`Invalid value ${JSON.stringify(e)} for "__internal" to PrismaClient constructor`);for(let[r]of Object.entries(e))if(!t.includes(r)){let n=jt(r,t);throw new R(`Invalid property ${JSON.stringify(r)} for "__internal" provided to PrismaClient constructor.${n}`)}}};function bm(e){let t=e.adapter!==void 0,r=e.accelerateUrl!==void 0;if(t&&r)throw new R('The "adapter" and "accelerateUrl" options are mutually exclusive. Please provide only one of them.');if(!t&&!r)throw new R('Using engine type "client" requires either "adapter" or "accelerateUrl" to be provided to PrismaClient constructor.')}function Ll(e,t){for(let[r,n]of Object.entries(e)){if(!Nl.includes(r)){let i=jt(r,Nl);throw new R(`Unknown property ${r} provided to PrismaClient constructor.${i}`)}wm[r](n,t)}bm(e)}function jt(e,t){if(t.length===0||typeof e!="string")return"";let r=xm(e,t);return r?` Did you mean "${r}"?`:""}function xm(e,t){if(t.length===0)return null;let r=t.map(i=>({value:i,distance:(0,_l.default)(e,i)}));r.sort((i,o)=>i.distance<o.distance?-1:1);let n=r[0];return n.distance<3?n.value:null}function Em(e,t){return Ml(t.models,e)??Ml(t.types,e)}function Ml(e,t){let r=Object.keys(e).find(n=>ue(n)===t);if(r)return e[r]}function Pm(e,t){let r=je(e);for(let o of t)switch(o.kind){case"UnknownModel":r.arguments.getField(o.modelKey)?.markAsError(),r.addErrorMessage(()=>`Unknown model name: ${o.modelKey}.`);break;case"UnknownField":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>`Model "${o.modelKey}" does not have a field named "${o.fieldName}".`);break;case"RelationInOmit":r.arguments.getDeepField([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":r.arguments.getDeepFieldValue([o.modelKey,o.fieldName])?.markAsError(),r.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:n,args:i}=sr(r,"colorless");return`Error validating "omit" option:

${i}

${n}`}var $l=require("@prisma/client-runtime-utils");function Vl(e){return e.length===0?Promise.resolve([]):new Promise((t,r)=>{let n=new Array(e.length),i=null,o=!1,s=0,a=()=>{o||(s++,s===e.length&&(o=!0,i?r(i):t(n)))},l=u=>{o||(o=!0,r(u))};for(let u=0;u<e.length;u++)e[u].then(c=>{n[u]=c,a()},c=>{if(!(0,$l.hasBatchIndex)(c)){l(c);return}c.batchRequestIdx===u?l(c):(i||(i=c),a())})})}var Ut=F("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var Tm={requestArgsToMiddlewareArgs:e=>e,middlewareArgsToRequestArgs:e=>e},Sm=Symbol.for("prisma.client.transaction.id"),Am={id:0,nextId(){return++this.id}};function Ql(e){class t{_originalClient=this;_runtimeDataModel;_requestHandler;_connectionPromise;_disconnectionPromise;_engineConfig;_accelerateEngineConfig;_clientVersion;_errorFormat;_tracingHelper;_previewFeatures;_activeProvider;_globalOmit;_extensions;_engine;_appliedParent;_createPrismaPromise=pi();constructor(n){if(!n)throw new w.PrismaClientInitializationError("`PrismaClient` needs to be constructed with a non-empty, valid `PrismaClientOptions`:\n\n```\nnew PrismaClient({\n  ...\n})\n```\n\nor\n\n```\nconstructor() {\n  super({ ... });\n}\n```\n          ",gi);e=n.__internal?.configOverride?.(e)??e,Ll(n,e);let i=new Bl.EventEmitter().on("error",()=>{});this._extensions=Ue.empty(),this._previewFeatures=e.previewFeatures,this._clientVersion=e.clientVersion??gi,this._activeProvider=e.activeProvider,this._globalOmit=n?.omit,this._tracingHelper=Sl();let o;if(n.adapter){o=n.adapter;let s=e.activeProvider==="postgresql"||e.activeProvider==="cockroachdb"?"postgres":e.activeProvider;if(o.provider!==s)throw new w.PrismaClientInitializationError(`The Driver Adapter \`${o.adapterName}\`, based on \`${o.provider}\`, is not compatible with the provider \`${s}\` specified in the Prisma schema.`,this._clientVersion)}try{let s=n??{},l=(s.__internal??{}).debug===!0;if(l&&F.enable("prisma:client"),s.errorFormat?this._errorFormat=s.errorFormat:process.env.NODE_ENV==="production"?this._errorFormat="minimal":process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=e.runtimeDataModel,this._engineConfig={enableDebugLogs:l,logLevel:s.log&&vl(s.log),logQueries:s.log&&!!(typeof s.log=="string"?s.log==="query":s.log.find(u=>typeof u=="string"?u==="query":u.level==="query")),compilerWasm:e.compilerWasm,clientVersion:e.clientVersion,previewFeatures:this._previewFeatures,activeProvider:e.activeProvider,inlineSchema:e.inlineSchema,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:s.transactionOptions?.maxWait??2e3,timeout:s.transactionOptions?.timeout??5e3,isolationLevel:s.transactionOptions?.isolationLevel},logEmitter:i,adapter:o,accelerateUrl:s.accelerateUrl,sqlCommenters:s.comments,parameterizationSchema:e.parameterizationSchema,runtimeDataModel:e.runtimeDataModel},this._accelerateEngineConfig=Object.create(this._engineConfig),this._accelerateEngineConfig.accelerateUtils={resolveDatasourceUrl:()=>{if(s.accelerateUrl)return s.accelerateUrl;throw new w.PrismaClientInitializationError(`\`accelerateUrl\` is required when using \`@prisma/extension-accelerate\`:

new PrismaClient({
  accelerateUrl: "prisma://...",
}).$extends(withAccelerate())
`,e.clientVersion)}},Ut("clientVersion",e.clientVersion),this._engine=ll(this._engineConfig),this._requestHandler=new zr(this,i),s.log)for(let u of s.log){let c=typeof u=="string"?u:u.emit==="stdout"?u.level:null;c&&this.$on(c,p=>{pt.log(`${pt.tags[c]??""}`,p.message||p.query)})}}catch(s){throw s.clientVersion=this._clientVersion,s}return this._appliedParent=Tt(this)}get[Symbol.toStringTag](){return"PrismaClient"}$on(n,i){return n==="beforeExit"?this._engine.onBeforeExit(i):n&&this._engineConfig.logEmitter.on(n,i),this}$connect(){try{return this._engine.start()}catch(n){throw n.clientVersion=this._clientVersion,n}}async $disconnect(){try{await this._engine.stop()}catch(n){throw n.clientVersion=this._clientVersion,n}finally{Oi()}}$executeRawInternal(n,i,o,s){let a=this._activeProvider;return this._request({action:"executeRaw",args:o,transaction:n,clientMethod:i,argsMapper:ci({clientMethod:i,activeProvider:a}),callsite:de(this._errorFormat),dataPath:[],middlewareArgsMapper:s})}$executeRaw(n,...i){return this._createPrismaPromise(o=>{if(n.raw!==void 0||n.sql!==void 0){let[s,a]=ql(n,i);return ui(this._activeProvider,s.text,s.values,Array.isArray(n)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(o,"$executeRaw",s,a)}throw new w.PrismaClientValidationError("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(n,...i){return this._createPrismaPromise(o=>(ui(this._activeProvider,n,i,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(o,"$executeRawUnsafe",[n,...i])))}$runCommandRaw(n){if(e.activeProvider!=="mongodb")throw new w.PrismaClientValidationError(`The ${e.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise(i=>this._request({args:n,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:ul,callsite:de(this._errorFormat),transaction:i}))}async $queryRawInternal(n,i,o,s){let a=this._activeProvider;return this._request({action:"queryRaw",args:o,transaction:n,clientMethod:i,argsMapper:ci({clientMethod:i,activeProvider:a}),callsite:de(this._errorFormat),dataPath:[],middlewareArgsMapper:s})}$queryRaw(n,...i){return this._createPrismaPromise(o=>{if(n.raw!==void 0||n.sql!==void 0)return this.$queryRawInternal(o,"$queryRaw",...ql(n,i));throw new w.PrismaClientValidationError("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(n){return this._createPrismaPromise(i=>{if(!this._hasPreviewFlag("typedSql"))throw new w.PrismaClientValidationError("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(i,"$queryRawTyped",n)})}$queryRawUnsafe(n,...i){return this._createPrismaPromise(o=>this.$queryRawInternal(o,"$queryRawUnsafe",[n,...i]))}_transactionWithArray({promises:n,options:i}){let o=Am.nextId(),s=Al(n.length),a=n.map((l,u)=>{if(l?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let c=i?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,p={kind:"batch",id:o,index:u,isolationLevel:c,lock:s};return l.requestTransaction?.(p)??l});return Vl(a)}async _transactionWithCallback({callback:n,options:i}){let o={traceparent:this._tracingHelper.getTraceParent()},s={maxWait:i?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:i?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:i?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},a=await this._engine.transaction("start",o,s),l;try{let u={kind:"itx",...a};l=await n(this._createItxClient(u)),await this._engine.transaction("commit",o,a)}catch(u){throw await this._engine.transaction("rollback",o,a).catch(()=>{}),u}return l}_createItxClient(n){return H(Tt(H(jo(this),[_("_appliedParent",()=>this._appliedParent._createItxClient(n)),_("_createPrismaPromise",()=>pi(n)),_(Sm,()=>n.id)])),[Be(Ho)])}$transaction(n,i){let o;typeof n=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?o=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:o=()=>this._transactionWithCallback({callback:n,options:i}):o=()=>this._transactionWithArray({promises:n,options:i});let s={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(s,o)}_request(n){n.otelParentCtx=this._tracingHelper.getActiveContext();let i=n.middlewareArgsMapper??Tm,o={args:i.requestArgsToMiddlewareArgs(n.args),dataPath:n.dataPath,runInTransaction:!!n.transaction,action:n.action,model:n.model},s={operation:{name:"operation",attributes:{method:o.action,model:o.model,name:o.model?`${o.model}.${o.action}`:o.action}}},a=async l=>{let{runInTransaction:u,args:c,...p}=l,d={...n,...p};c&&(d.args=i.middlewareArgsToRequestArgs(c)),n.transaction!==void 0&&u===!1&&delete d.transaction;let f=await Ko(this,d);return d.model?Jo({result:f,modelName:d.model,args:d.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):f};return this._tracingHelper.runInChildSpan(s.operation,()=>new Ul.AsyncResource("prisma-client-request").runInAsyncScope(()=>a(o)))}async _executeRequest({args:n,clientMethod:i,dataPath:o,callsite:s,action:a,model:l,argsMapper:u,transaction:c,unpacker:p,otelParentCtx:d,customDataProxyFetch:f}){try{n=u?u(n):n;let h={name:"serialize"},x=this._tracingHelper.runInChildSpan(h,()=>pr({modelName:l,runtimeDataModel:this._runtimeDataModel,action:a,args:n,clientMethod:i,callsite:s,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return F.enabled("prisma:client")&&(Ut("Prisma Client call:"),Ut(`prisma.${i}(${Io(n)})`),Ut("Generated request:"),Ut(JSON.stringify(x,null,2)+`
`)),c?.kind==="batch"&&await c.lock,this._requestHandler.request({protocolQuery:x,modelName:l,action:a,clientMethod:i,dataPath:o,callsite:s,args:n,extensions:this._extensions,transaction:c,unpacker:p,otelParentCtx:d,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:f})}catch(h){throw h.clientVersion=this._clientVersion,h}}_hasPreviewFlag(n){return!!this._engineConfig.previewFeatures?.includes(n)}$extends=Uo}return t}function ql(e,t){return vm(e)?[new jl.Sql(e,t),wl]:[e,bl]}function vm(e){return Array.isArray(e)&&Array.isArray(e.raw)}var Cm=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function Jl(e){return new Proxy(e,{get(t,r){if(r in t)return t[r];if(!Cm.has(r))throw new TypeError(`Invalid enum value: ${String(r)}`)}})}var Rm=()=>globalThis.process?.release?.name==="node",km=()=>!!globalThis.Bun||!!globalThis.process?.versions?.bun,Im=()=>!!globalThis.Deno,Om=()=>typeof globalThis.Netlify=="object",Nm=()=>typeof globalThis.EdgeRuntime=="object",Dm=()=>globalThis.navigator?.userAgent==="Cloudflare-Workers";function Fm(){return[[Om,"netlify"],[Nm,"edge-light"],[Dm,"workerd"],[Im,"deno"],[km,"bun"],[Rm,"node"]].flatMap(r=>r[0]()?[r[1]]:[]).at(0)??""}var Mm={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function Hl(){let e=Fm();return{id:e,prettyName:Mm[e]||e,isEdge:["workerd","deno","netlify","edge-light"].includes(e)}}var w=require("@prisma/client-runtime-utils"),re=require("@prisma/client-runtime-utils"),M=require("@prisma/client-runtime-utils"),Gl=require("@prisma/client-runtime-utils");0&&(module.exports={AnyNull,DMMF,DbNull,Debug,Decimal,Extensions,JsonNull,NullTypes,ObjectEnumValue,PrismaClientInitializationError,PrismaClientKnownRequestError,PrismaClientRustPanicError,PrismaClientUnknownRequestError,PrismaClientValidationError,Public,Sql,createParam,defineDmmfProperty,deserializeJsonResponse,deserializeRawResult,dmmfToRuntimeDataModel,empty,getPrismaClient,getRuntime,isAnyNull,isDbNull,isJsonNull,join,makeStrictEnum,makeTypedQueryFactory,raw,serializeJsonQuery,skip,sqltag,warnOnce});
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=client.js.map
